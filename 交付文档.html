<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'><style type='text/css'>html {overflow-x: initial !important;}</style>
<style type='text/css'  id="style-mermaid">:root { --mermaid-theme: default; --mermaid-sequence-numbers: off; --mermaid-flowchart-curve: linear; --mermaid--gantt-left-padding: 75; --sequence-theme: simple; }
.privacy { display: none; }

</style>
<style type='text/css'  id="style-base">:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, "Segoe UI Emoji", "SF Pro", sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p *, #write.first-line-indent svg * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-width: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-variant-emoji: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; position: relative; }
#write svg h1, #write svg h2, #write svg h3, #write svg h4, #write svg h5, #write svg h6, #write svg p { position: static; }
svg sub, svg sup { position: static; }
.nodeLabel p { padding-right: 2px; padding-left: 2px; }
.typora-export .nodeLabel p { padding-right: 0px; padding-left: 0px; }
foreignObject { overflow: visible; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
li p { orphans: 1; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { -webkit-user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.mermaid-svg { margin: auto; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left-width: 0.25em; border-left-style: solid; border-left-color: rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }

</style>
<style type='text/css'  id="style-codemirror">.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: medium !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}

</style>
<style type='text/css'  id="style-theme_css">:root {
  --mermaid-theme: night;
}

[lang='mermaid'] .label {
  color: #333;
}

/* CSS Document */

/** code highlight */

.cm-s-inner .cm-variable,
.cm-s-inner .cm-operator,
.cm-s-inner .cm-property {
    color: #b8bfc6;
}

.cm-s-inner .cm-keyword {
    color: #C88FD0;
}

.cm-s-inner .cm-tag {
    color: #7DF46A;
}

.cm-s-inner .cm-attribute {
    color: #7575E4;
}

.CodeMirror div.CodeMirror-cursor {
    border-left: 1px solid #b8bfc6;
    z-index: 3;
}

.cm-s-inner .cm-string {
    color: #D26B6B;
}

.cm-s-inner .cm-comment,
.cm-s-inner.cm-comment {
    color: #DA924A;
}

.cm-s-inner .cm-header,
.cm-s-inner .cm-def,
.cm-s-inner.cm-header,
.cm-s-inner.cm-def {
    color: #8d8df0;
}

.cm-s-inner .cm-quote,
.cm-s-inner.cm-quote {
    color: #57ac57;
}

.cm-s-inner .cm-hr {
    color: #d8d5d5;
}

.cm-s-inner .cm-link {
    color: #d3d3ef;
}

.cm-s-inner .cm-negative {
    color: #d95050;
}

.cm-s-inner .cm-positive {
    color: #50e650;
}

.cm-s-inner .cm-string-2 {
    color: #f50;
}

.cm-s-inner .cm-meta,
.cm-s-inner .cm-qualifier {
    color: #b7b3b3;
}

.cm-s-inner .cm-builtin {
    color: #f3b3f8;
}

.cm-s-inner .cm-bracket {
    color: #997;
}

.cm-s-inner .cm-atom,
.cm-s-inner.cm-atom {
    color: #84B6CB;
}

.cm-s-inner .cm-number {
    color: #64AB8F;
}

.cm-s-inner .cm-variable {
    color: #b8bfc6;
}

.cm-s-inner .cm-variable-2 {
    color: #9FBAD5;
}

.cm-s-inner .cm-variable-3 {
    color: #1cc685;
}

.CodeMirror-selectedtext,
.CodeMirror-selected {
    background: #4a89dc;
    color: #fff !important;
    text-shadow: none;
}

.CodeMirror-gutters {
    border-right: none;
}

/* CSS Document */

/** markdown source **/
.cm-s-typora-default .cm-header, 
.cm-s-typora-default .cm-property
{
    color: #cebcca;
}

.CodeMirror.cm-s-typora-default div.CodeMirror-cursor{
    border-left: 3px solid #b8bfc6;
}

.cm-s-typora-default .cm-comment {
    color: #9FB1FF;
}

.cm-s-typora-default .cm-string {
    color: #A7A7D9
}

.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number {
    color: #848695;
    font-style: italic;
}

.cm-s-typora-default .cm-link {
    color: #95B94B;
}

.cm-s-typora-default .CodeMirror-activeline-background {
    background: rgba(51, 51, 51, 0.72);
}

.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code {
	color: #8aa1e1;
}@import "";
@import "";
@import "";

:root {
    --bg-color:  #363B40;
    --side-bar-bg-color: #2E3033;
    --text-color: #b8bfc6;

    --select-text-bg-color:#4a89dc;

    --item-hover-bg-color: #0a0d16;
    --control-text-color: #b7b7b7;
    --control-text-hover-color: #eee;
    --window-border: 1px solid #555;

    --active-file-bg-color: rgb(34, 34, 34);
    --active-file-border-color: #8d8df0;

    --primary-color: #a3d5fe;

    --active-file-text-color: white;
    --item-hover-bg-color: #70717d;
    --item-hover-text-color: white;
    --primary-color: #6dc1e7;

    --rawblock-edit-panel-bd: #333;

    --search-select-bg-color: #428bca;
}

html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

html,
body {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    background: #363B40;
    background: var(--bg-color);
    fill: currentColor;
    line-height: 1.625rem;
}

#write {
    max-width: 914px;
}


@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

html,
body,
button,
input,
select,
textarea,
div.code-tooltip-content {
    color: #b8bfc6;
    border-color: transparent;
}

div.code-tooltip,
.md-hover-tip .md-arrow:after {
    background: #333;
}

.native-window #md-notification {
    border: 1px solid #70717d;
}

.popover.bottom > .arrow:after {
    border-bottom-color: #333;
}

html,
body,
button,
input,
select,
textarea {
    font-family: "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', 'SF Pro',  sans-serif;
}

hr {
    height: 2px;
    border: 0;
    margin: 24px 0 !important;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: "Lucida Grande", "Corbel", sans-serif;
    font-weight: normal;
    clear: both;
    -ms-word-wrap: break-word;
    word-wrap: break-word;
    margin: 0;
    padding: 0;
    color: #DEDEDE
}

h1 {
    font-size: 2.5rem;
    /* 36px */
    line-height: 2.75rem;
    /* 40px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1.5px;
}

h2 {
    font-size: 1.63rem;
    /* 24px */
    line-height: 1.875rem;
    /* 30px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1px;
    font-weight: bold;
}

h3 {
    font-size: 1.17rem;
    /* 18px */
    line-height: 1.5rem;
    /* 24px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1px;
    font-weight: bold;
}

h4 {
    font-size: 1.12rem;
    /* 16px */
    line-height: 1.375rem;
    /* 22px */
    margin-bottom: 1.5rem;
    /* 24px */
    color: white;
}

h5 {
    font-size: 0.97rem;
    /* 16px */
    line-height: 1.25rem;
    /* 22px */
    margin-bottom: 1.5rem;
    /* 24px */
    font-weight: bold;
}

h6 {
    font-size: 0.93rem;
    /* 16px */
    line-height: 1rem;
    /* 16px */
    margin-bottom: 0.75rem;
    color: white;
}

@media (min-width: 980px) {
    h3.md-focus:before,
    h4.md-focus:before,
    h5.md-focus:before,
    h6.md-focus:before {
        color: #ddd;
        border: 1px solid #ddd;
        border-radius: 3px;
        position: absolute;
        left: -1.642857143rem;
        top: .357142857rem;
        float: left;
        font-size: 9px;
        padding-left: 2px;
        padding-right: 2px;
        vertical-align: bottom;
        font-weight: normal;
        line-height: normal;
    }

    h3.md-focus:before {
        content: 'h3';
    }

    h4.md-focus:before {
        content: 'h4';
    }

    h5.md-focus:before {
        content: 'h5';
        top: 0px;
    }

    h6.md-focus:before {
        content: 'h6';
        top: 0px;
    }
}

a {
    text-decoration: none;
    outline: 0;
}

a:hover {
    outline: 0;
}

a:focus {
    outline: thin dotted;
}

sup.md-footnote {
    background-color: #555;
    color: #ddd;
}

p {
    -ms-word-wrap: break-word;
    word-wrap: break-word;
}

p,
ul,
dd,
ol,
hr,
address,
pre,
table,
iframe,
.wp-caption,
.wp-audio-shortcode,
.wp-video-shortcode {
    margin-top: 0;
    margin-bottom: 1.5rem;
    /* 24px */
}

audio:not([controls]) {
    display: none;
}

[hidden] {
    display: none;
}

::-moz-selection {
    background: #4a89dc;
    color: #fff;
    text-shadow: none;
}

*.in-text-selection,
::selection {
    background: #4a89dc;
    color: #fff;
    text-shadow: none;
}

ul,
ol {
    padding: 0 0 0 1.875rem;
    /* 30px */
}

ul {
    list-style: square;
}

ol {
    list-style: decimal;
}

ul ul,
ol ol,
ul ol,
ol ul {
    margin: 0;
}

b,
th,
dt,
strong {
    font-weight: bold;
}

i,
em,
dfn,
cite {
    font-style: italic;
}

blockquote {
    padding-left: 1.875rem;
    margin: 0 0 1.875rem 1.875rem;
    border-left: solid 2px #474d54;
    padding-left: 30px;
    margin-top: 35px;
}

pre,
code,
kbd,
tt,
var {
    font-size: 0.875em;
    font-family: Monaco, Consolas, "Andale Mono", "DejaVu Sans Mono", monospace;
}

code,
tt,
var {
    background: rgba(0, 0, 0, 0.05);
}

kbd {
    padding: 2px 4px;
    font-size: 90%;
    color: #fff;
    background-color: #333;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);
}

pre.md-fences {
    padding: 10px 10px 10px 30px;
    margin-bottom: 20px;
    background: #333;
}

.CodeMirror-gutters {
    background: #333;
    border-right: 1px solid transparent;
}

.enable-diagrams pre.md-fences[lang="sequence"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="flow"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="mermaid"] .code-tooltip {
    bottom: -2.2em;
    right: 4px;
}

code,
kbd,
tt,
var {
    padding: 2px 5px;
}

table {
    max-width: 100%;
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
}

th,
td {
    padding: 5px 10px;
    vertical-align: top;
}

a {
    -webkit-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}

hr {
    background: #474d54;
    /* variable */
}

h1 {
    margin-top: 2em;
}

a {
    color: #e0e0e0;
    text-decoration: underline;
}

a:hover {
    color: #fff;
}

.md-inline-math script {
    color: #81b1db;
}

b,
th,
dt,
strong {
    color: #DEDEDE;
    /* variable */
}

mark {
    background: #D3D40E;
}

blockquote {
    color: #9DA2A6;
}

table a {
    color: #DEDEDE;
    /* variable */
}

th,
td {
    border: solid 1px #474d54;
    /* variable */
}

.task-list {
    padding-left: 0;
}

.md-task-list-item {
    padding-left: 1.25rem;
}

.md-task-list-item > input {
    top: auto;
}

.md-task-list-item > input:before {
    content: "";
    display: inline-block;
    width: 0.875rem;
    height: 0.875rem;
    vertical-align: middle;
    text-align: center;
    border: 1px solid #b8bfc6;
    background-color: #363B40;
    margin-top: -0.4rem;
}

.md-task-list-item > input:checked:before,
.md-task-list-item > input[checked]:before {
    content: '\221A';
    /*◘*/
    font-size: 0.625rem;
    line-height: 0.625rem;
    color: #DEDEDE;
}

/** quick open **/
.auto-suggest-container {
    border: 0px;
    background-color: #525C65;
}

#typora-quick-open {
    background-color: #525C65;
}

#typora-quick-open input{
    background-color: #525C65;
    border: 0;
    border-bottom: 1px solid grey;
}

.typora-quick-open-item {
    background-color: inherit;
    color: inherit;
}

.typora-quick-open-item.active,
.typora-quick-open-item:hover {
    background-color: #4D8BDB;
    color: white;
}

.typora-quick-open-item:hover {
    background-color: rgba(77, 139, 219, 0.8);
}

.typora-search-spinner > div {
  background-color: #fff;
}

#write pre.md-meta-block {
    border-bottom: 1px dashed #ccc;
    background: transparent;
    padding-bottom: 0.6em;
    line-height: 1.6em;
}

.btn,
.btn .btn-default {
    background: transparent;
    color: #b8bfc6;
}

.ty-table-edit {
    border-top: 1px solid gray;
    background-color: #363B40;
}

.popover-title {
    background: transparent;
}

.md-image>.md-meta {
    color: #BBBBBB;
    background: transparent;
}

.md-expand.md-image>.md-meta {
    color: #DDD;
}

#write>h3:before,
#write>h4:before,
#write>h5:before,
#write>h6:before {
    border: none;
    border-radius: 0px;
    color: #888;
    text-decoration: underline;
    left: -1.4rem;
    top: 0.2rem;
}

#write>h3.md-focus:before {
    top: 2px;
}

#write>h4.md-focus:before {
    top: 2px;
}

.md-toc-item {
    color: #A8C2DC;
}

#write div.md-toc-tooltip {
    background-color: #363B40;
}

.dropdown-menu .btn:hover,
.dropdown-menu .btn:focus,
.md-toc .btn:hover,
.md-toc .btn:focus {
    color: white;
    background: black;
}

#toc-dropmenu {
    background: rgba(50, 54, 59, 0.93);
    border: 1px solid rgba(253, 253, 253, 0.15);
}

#toc-dropmenu .divider {
    background-color: #9b9b9b;
}

.outline-expander:before {
    top: 2px;
}

#typora-sidebar {
    box-shadow: none;
    border-right: 1px dashed;
    border-right: none;
}

.sidebar-tabs {
    border-bottom:0;
}

#typora-sidebar:hover .outline-title-wrapper {
    border-left: 1px dashed;
}

.outline-title-wrapper .btn {
    color: inherit;
}

.outline-item:hover {
    border-color: #363B40;
    background-color: #363B40;
    color: white;
}

h1.md-focus .md-attr,
h2.md-focus .md-attr,
h3.md-focus .md-attr,
h4.md-focus .md-attr,
h5.md-focus .md-attr,
h6.md-focus .md-attr,
.md-header-span .md-attr {
    color: #8C8E92;
    display: inline;
}

.md-comment {
    color: #5a95e3;
    opacity: 0.8;
}

.md-inline-math svg {
    color: #b8bfc6;
}

#math-inline-preview .md-arrow:after {
    background: black;
}

.modal-content {
    background: var(--bg-color);
    border: 0;
}

.modal-title {
    font-size: 1.5em;
}

.modal-content input {
    background-color: rgba(26, 21, 21, 0.51);
    color: white;
}

.modal-content .input-group-addon {
    color: white;
}

.modal-backdrop {
    background-color: rgba(174, 174, 174, 0.7);
}

.modal-content .btn-primary {
    border-color: var(--primary-color);
}

.md-table-resize-popover {
    background-color: #333;
}

.form-inline .input-group .input-group-addon {
    color: white;
}

#md-searchpanel {
    border-bottom: 1px dashed grey;
}

/** UI for electron */

.context-menu,
#spell-check-panel,
#footer-word-count-info {
    background-color: #42464A;
}

.context-menu.dropdown-menu .divider,
.dropdown-menu .divider {
    background-color: #777777;
    opacity: 1;
}

footer {
    color: inherit;
}

@media (max-width: 1000px) {
    footer {
        border-top: none;
    }
    footer:hover {
        color: inherit;
    }
}

#file-info-file-path .file-info-field-value:hover {
    background-color: #555;
    color: #dedede;
}

.megamenu-content,
.megamenu-opened header {
    background: var(--bg-color);
}

.megamenu-menu-panel h2,
.megamenu-menu-panel h1,
.long-btn {
    color: inherit;
}

.megamenu-menu-panel input[type='text'] {
    background: inherit;
    border: 0;
    border-bottom: 1px solid;
}

#recent-file-panel-action-btn {
    background: inherit;
    border: 1px grey solid;
}

.megamenu-menu-panel .dropdown-menu > li > a {
    color: inherit;
    background-color: #2F353A;
    text-decoration: none;
}

.megamenu-menu-panel table td:nth-child(1) {
    color: inherit;
    font-weight: bold;
}

.megamenu-menu-panel tbody tr:hover td:nth-child(1) {
    color: white;
}

.modal-footer .btn-default, 
.modal-footer .btn-primary,
.modal-footer .btn-default:not(:hover) {
    border: 1px solid;
    border-color: transparent;
}

.btn-primary {
    color: white;
}

.btn-default:hover, .btn-default:focus, .btn-default.focus, .btn-default:active, .btn-default.active, .open > .dropdown-toggle.btn-default {
    color: white;
    border: 1px solid #ddd;
    background-color: inherit;
}

.modal-header {
    border-bottom: 0;
}

.modal-footer {
    border-top: 0;
}

#recent-file-panel tbody tr:nth-child(2n-1) {
    background-color: transparent !important;
}

.megamenu-menu-panel tbody tr:hover td:nth-child(2) {
    color: inherit;
}

.megamenu-menu-panel .btn {
    border: 1px solid #eee;
    background: transparent;
}

.mouse-hover .toolbar-icon.btn:hover,
#w-full.mouse-hover,
#w-pin.mouse-hover {
    background-color: inherit;
}

.typora-node::-webkit-scrollbar {
    width: 5px;
}

.typora-node::-webkit-scrollbar-thumb:vertical {
    background: rgba(250, 250, 250, 0.3);
}

.typora-node::-webkit-scrollbar-thumb:vertical:active {
    background: rgba(250, 250, 250, 0.5);
}

#w-unpin {
    background-color: #4182c4;
}

#top-titlebar, #top-titlebar * {
    color: var(--item-hover-text-color);
}

.typora-sourceview-on #toggle-sourceview-btn,
#footer-word-count:hover,
.ty-show-word-count #footer-word-count {
    background: #333333;
}

#toggle-sourceview-btn:hover {
    color: #eee;
    background: #333333;
}

/** focus mode */
.on-focus-mode .md-end-block:not(.md-focus):not(.md-focus-container) * {
    color: #686868 !important;
}

.on-focus-mode .md-end-block:not(.md-focus) img,
.on-focus-mode .md-task-list-item:not(.md-focus-container)>input {
    opacity: #686868 !important;
}

.on-focus-mode li[cid]:not(.md-focus-container){
    color: #686868;
}

.on-focus-mode .md-fences.md-focus .CodeMirror-code>*:not(.CodeMirror-activeline) *,
.on-focus-mode .CodeMirror.cm-s-inner:not(.CodeMirror-focused) * {
    color: #686868 !important;
}

.on-focus-mode .md-focus,
.on-focus-mode .md-focus-container {
    color: #fff;
}

.on-focus-mode #typora-source .CodeMirror-code>*:not(.CodeMirror-activeline) * {
    color: #686868 !important;
}


/*diagrams*/
#write .md-focus .md-diagram-panel {
    border: 1px solid #ddd;
    margin-left: -1px;
    width: calc(100% + 2px);
}

/*diagrams*/
#write .md-focus.md-fences-with-lineno .md-diagram-panel {
    margin-left: auto;
}

.md-diagram-panel-error {
    color: #f1908e;
}

.active-tab-files #info-panel-tab-file,
.active-tab-files #info-panel-tab-file:hover,
.active-tab-outline #info-panel-tab-outline,
.active-tab-outline #info-panel-tab-outline:hover {
    color: #eee;
}

.sidebar-footer-item:hover,
.footer-item:hover {
    background: inherit;
    color: white;
}

.ty-side-sort-btn.active,
.ty-side-sort-btn:hover,
.selected-folder-menu-item a:after {
    color: white;
}

#sidebar-files-menu {
    border:solid 1px;
    box-shadow: 4px 4px 20px rgba(0, 0, 0, 0.79);
    background-color: var(--bg-color);
}

.file-list-item {
    border-bottom:none;
}

.file-list-item-summary {
    opacity: 1;
}

.file-list-item.active:first-child {
    border-top: none;
}

.file-node-background {
    height: 32px;
}

.file-library-node.active>.file-node-content,
.file-list-item.active {
    color: white;
    color: var(--active-file-text-color);
}

.file-library-node.active>.file-node-background{
    background-color: rgb(34, 34, 34);
    background-color: var(--active-file-bg-color);
}
.file-list-item.active {
    background-color: rgb(34, 34, 34);
    background-color: var(--active-file-bg-color);
}

#ty-tooltip {
    background-color: black;
    color: #eee;
}

.md-task-list-item>input {
    margin-left: -1.3em;
    margin-top: 0.3rem;
    -webkit-appearance: none;
}

.md-mathjax-midline {
    background-color: #57616b;
    border-bottom: none;
}

footer.ty-footer {
    border-color: #656565;
}

.ty-preferences .btn-default {
    background: transparent;
}
.ty-preferences .btn-default:hover {
    background: #57616b;
}

.ty-preferences select {
    border: 1px solid #989698;
    height: 21px;
}

.ty-preferences .nav-group-item.active,
.export-item.active,
.export-items-list-control,
.export-detail {
    background: var(--item-hover-bg-color);
}

.ty-preferences input[type="search"] {
    border-color: #333;
    background: #333;
    line-height: 22px;
    border-radius: 6px;
    color: white;
}

.ty-preferences input[type="search"]:focus {
    box-shadow: none;
}

[data-is-directory="true"] .file-node-content {
    margin-bottom: 0;
}

.file-node-title {
    line-height: 22px;
}

.html-for-mac .file-node-open-state, .html-for-mac .file-node-icon {
    line-height: 26px;
}

::-webkit-scrollbar-thumb {
    background: rgba(230, 230, 230, 0.30);
}

::-webkit-scrollbar-thumb:active {
    background: rgba(230, 230, 230, 0.50);
}

#typora-sidebar:hover div.sidebar-content-content::-webkit-scrollbar-thumb:horizontal {
    background: rgba(230, 230, 230, 0.30);
}

.nav-group-item:active {
    background-color: #474d54 !important;
}

.md-search-hit {
    background: rgba(199, 140, 60, 0.81);
    color: #eee;
}

.md-search-hit * {
    color: #eee;
}

#md-searchpanel input {
    color: white;
}

.modal-backdrop.in {
    opacity: 1;
    backdrop-filter: blur(1px);
}

.clear-btn-icon {
    top: 8px;
}

/* try fix https://github.com/typora/typora-issues/issues/5253 */
.file-node-expanded>.file-node-children {
    display: grid;
  }

.md-alert-text-note {
    color: rgb(47, 129, 247);
}
.md-alert-text-important {
    color: rgb(163, 113, 247);
}
.md-alert-text-warning {
    color:  rgb(210, 153, 34);
}</style>
<style type='text/css'  id="style-lp">ol, ul {padding-left: 40px}</style>
<style type='text/css'  id="style-mac-print"> @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}</style>

<title>交付文档</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='四路正交信号频率倍频系统---交付文档'><span>四路正交信号频率倍频系统 - 交付文档</span></h1><h2 id='文档信息'><span>文档信息</span></h2><figure class='table-figure'><table><thead><tr><th><span>项目</span></th><th><span>内容</span></th></tr></thead><tbody><tr><td><span>项目名称</span></td><td><span>四路正交信号频率倍频系统</span></td></tr><tr><td><span>版本</span></td><td><span>v1.0</span></td></tr><tr><td><span>交付日期</span></td><td><span>2026年2月</span></td></tr><tr><td><span>开发平台</span></td><td><span>Raspberry Pi Pico (RP2040)</span></td></tr><tr><td><span>核心芯片</span></td><td><span>AD9959 DDS + OPA4354 放大器</span></td></tr></tbody></table></figure><hr /><h2 id='1-项目概述'><span>1. 项目概述</span></h2><h3 id='11-客户需求'><span>1.1 客户需求</span></h3><h4 id='输入信号规格'><span>输入信号规格</span></h4><figure class='table-figure'><table><thead><tr><th><span>参数</span></th><th><span>规格</span></th></tr></thead><tbody><tr><td><span>信号路数</span></td><td><span>4路模拟信号</span></td></tr><tr><td><span>信号类型</span></td><td><span>SIN+, COS+, SIN-, COS-</span></td></tr><tr><td><span>相位关系</span></td><td><span>四路信号两两偏差90°相位角</span></td></tr><tr><td><span>峰峰值</span></td><td><span>1V</span></td></tr><tr><td><span>直流偏置</span></td><td><span>2.5V</span></td></tr><tr><td><span>频率范围</span></td><td><span>10Hz ~ 100kHz</span></td></tr></tbody></table></figure><h4 id='输出信号规格'><span>输出信号规格</span></h4><figure class='table-figure'><table><thead><tr><th><span>参数</span></th><th><span>规格</span></th></tr></thead><tbody><tr><td><span>信号路数</span></td><td><span>4路模拟信号</span></td></tr><tr><td><span>信号类型</span></td><td><span>SIN+, COS+, SIN-, COS-</span></td></tr><tr><td><span>相位关系</span></td><td><span>四路信号两两偏差90°相位角（精确正交）</span></td></tr><tr><td><span>峰峰值</span></td><td><span>1V</span></td></tr><tr><td><span>直流偏置</span></td><td><span>2.5V</span></td></tr><tr><td><span>频率范围</span></td><td><span>输入频率的 2~20 倍</span></td></tr></tbody></table></figure><h3 id='12-系统功能'><span>1.2 系统功能</span></h3><p><span>本系统实现以下核心功能：</span></p><ul><li><p><span>✅ 实时检测四路输入信号的频率和相位关系</span></p></li><li><p><span>✅ 将输入频率倍频（2~20倍可调）</span></p></li><li><p><span>✅ 输出精确正交的四路信号（90°相位差）</span></p></li><li><p><span>✅ 自动补偿频率响应，确保输出幅度稳定在1Vpp</span></p></li><li><p><span>✅ 保持2.5V直流偏置</span></p></li></ul><hr /><h2 id='2-技术方案'><span>2. 技术方案</span></h2><h3 id='21-系统架构'><span>2.1 系统架构</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart0" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 1001.125px;" viewBox="0 0 1001.125 1102" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart0{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart0 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart0 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart0 .error-icon{fill:#a44141;}#mermaidChart0 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart0 .edge-thickness-normal{stroke-width:1px;}#mermaidChart0 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart0 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart0 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart0 .marker.cross{stroke:lightgrey;}#mermaidChart0 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart0 p{margin:0;}#mermaidChart0 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart0 .cluster-label text{fill:#F9FFFE;}#mermaidChart0 .cluster-label span{color:#F9FFFE;}#mermaidChart0 .cluster-label span p{background-color:transparent;}#mermaidChart0 .label text,#mermaidChart0 span{fill:#ccc;color:#ccc;}#mermaidChart0 .node rect,#mermaidChart0 .node circle,#mermaidChart0 .node ellipse,#mermaidChart0 .node polygon,#mermaidChart0 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart0 .rough-node .label text,#mermaidChart0 .node .label text,#mermaidChart0 .image-shape .label,#mermaidChart0 .icon-shape .label{text-anchor:middle;}#mermaidChart0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart0 .rough-node .label,#mermaidChart0 .node .label,#mermaidChart0 .image-shape .label,#mermaidChart0 .icon-shape .label{text-align:center;}#mermaidChart0 .node.clickable{cursor:pointer;}#mermaidChart0 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart0 .arrowheadPath{fill:lightgrey;}#mermaidChart0 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart0 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart0 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart0 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart0 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart0 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart0 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart0 .cluster text{fill:#F9FFFE;}#mermaidChart0 .cluster span{color:#F9FFFE;}#mermaidChart0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart0 rect.text{fill:none;stroke-width:0;}#mermaidChart0 .icon-shape,#mermaidChart0 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart0 .icon-shape p,#mermaidChart0 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart0 .icon-shape rect,#mermaidChart0 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart0 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart0 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart0 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart0_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart0_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart0_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M172.813,110L172.813,135L392.963,186.049" id="L_A1_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M391.313,110L391.313,135L423.966,157.716" id="L_A2_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M609.813,110L609.813,135L577.159,157.716" id="L_A3_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M828.313,110L828.313,135L608.162,186.049" id="L_A4_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M500.563,262L500.563,287L500.563,308" id="L_B_C_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M500.563,414L500.563,439L500.563,460" id="L_C_D_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M500.563,590L500.563,615L500.563,636" id="L_D_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M500.563,790L500.563,815L500.563,836" id="L_E_F_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M388.023,913.034L112.391,967L112.391,988" id="L_F_G1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M413.735,942L371.172,967L371.172,988" id="L_F_G2_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M587.39,942L629.953,967L629.953,988" id="L_F_G3_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path><path d="M613.102,913.034L888.734,967L888.734,988" id="L_F_G4_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart0_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A1-0" transform="translate(172.8125, 59)"><rect class="basic label-container" style="" x="-84.25" y="-51" width="168.5" height="102"></rect><g class="label" style="" transform="translate(-54.25, -36)"><rect></rect><foreignObject width="108.5" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>SIN+输入<br/>1Vpp 2.5V偏置<br/>10Hz~100kHz</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(500.5625, 211)"><rect class="basic label-container" style="" x="-103.703125" y="-51" width="207.40625" height="102"></rect><g class="label" style="" transform="translate(-73.703125, -36)"><rect></rect><foreignObject width="147.40625" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>过零检测电路<br/>MCP6564高速比较器<br/>支持100kHz频率</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-A2-2" transform="translate(391.3125, 59)"><rect class="basic label-container" style="" x="-84.25" y="-51" width="168.5" height="102"></rect><g class="label" style="" transform="translate(-54.25, -36)"><rect></rect><foreignObject width="108.5" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>COS+输入<br/>1Vpp 2.5V偏置<br/>10Hz~100kHz</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-A3-4" transform="translate(609.8125, 59)"><rect class="basic label-container" style="" x="-84.25" y="-51" width="168.5" height="102"></rect><g class="label" style="" transform="translate(-54.25, -36)"><rect></rect><foreignObject width="108.5" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>SIN-输入<br/>1Vpp 2.5V偏置<br/>10Hz~100kHz</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-A4-6" transform="translate(828.3125, 59)"><rect class="basic label-container" style="" x="-84.25" y="-51" width="168.5" height="102"></rect><g class="label" style="" transform="translate(-54.25, -36)"><rect></rect><foreignObject width="108.5" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>COS-输入<br/>1Vpp 2.5V偏置<br/>10Hz~100kHz</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-9" transform="translate(500.5625, 363)"><rect class="basic label-container" style="" x="-120.390625" y="-51" width="240.78125" height="102"></rect><g class="label" style="" transform="translate(-90.390625, -36)"><rect></rect><foreignObject width="180.78125" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>RP2040 PIO硬件测量模块<br/>PIO0: 频率测量 4通道<br/>PIO1: 相位测量 3通道</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-11" transform="translate(500.5625, 527)"><rect class="basic label-container" style="" x="-94.609375" y="-63" width="189.21875" height="126"></rect><g class="label" style="" transform="translate(-64.609375, -48)"><rect></rect><foreignObject width="129.21875" height="96"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>RP2040 主控处理<br/>• 频率计算与滤波<br/>• 相位校准算法<br/>• 幅度补偿算法</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E-13" transform="translate(500.5625, 715)"><rect class="basic label-container" style="" x="-97.796875" y="-75" width="195.59375" height="150"></rect><g class="label" style="" transform="translate(-67.796875, -60)"><rect></rect><foreignObject width="135.59375" height="120"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>AD9959 DDS芯片<br/>SPI控制<br/>• 4通道独立输出<br/>• 频率倍频 2~20倍<br/>• 精确相位控制</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-F-15" transform="translate(500.5625, 891)"><rect class="basic label-container" style="" x="-112.5390625" y="-51" width="225.078125" height="102"></rect><g class="label" style="" transform="translate(-82.5390625, -36)"><rect></rect><foreignObject width="165.078125" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>OPA4354 放大器模块<br/>• 反相放大器 增益=2.4<br/>• 频率响应补偿</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G1-17" transform="translate(112.390625, 1043)"><rect class="basic label-container" style="" x="-104.390625" y="-51" width="208.78125" height="102"></rect><g class="label" style="" transform="translate(-74.390625, -36)"><rect></rect><foreignObject width="148.78125" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>SIN+输出<br/>1Vpp 2.5V偏置<br/>频率=输入×倍频系数</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G2-19" transform="translate(371.171875, 1043)"><rect class="basic label-container" style="" x="-104.390625" y="-51" width="208.78125" height="102"></rect><g class="label" style="" transform="translate(-74.390625, -36)"><rect></rect><foreignObject width="148.78125" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>COS+输出<br/>1Vpp 2.5V偏置<br/>频率=输入×倍频系数</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G3-21" transform="translate(629.953125, 1043)"><rect class="basic label-container" style="" x="-104.390625" y="-51" width="208.78125" height="102"></rect><g class="label" style="" transform="translate(-74.390625, -36)"><rect></rect><foreignObject width="148.78125" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>SIN-输出<br/>1Vpp 2.5V偏置<br/>频率=输入×倍频系数</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G4-23" transform="translate(888.734375, 1043)"><rect class="basic label-container" style="" x="-104.390625" y="-51" width="208.78125" height="102"></rect><g class="label" style="" transform="translate(-74.390625, -36)"><rect></rect><foreignObject width="148.78125" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>COS-输出<br/>1Vpp 2.5V偏置<br/>频率=输入×倍频系数</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><h3 id='22-硬件选型'><span>2.2 硬件选型</span></h3><figure class='table-figure'><table><thead><tr><th><span>模块</span></th><th><span>芯片/器件</span></th><th><span>关键参数</span></th><th><span>选型理由</span></th></tr></thead><tbody><tr><td><span>主控MCU</span></td><td><span>RP2040</span></td><td><span>双核Cortex-M0+, 200MHz</span></td><td><span>内置PIO硬件，支持高速信号处理</span></td></tr><tr><td><span>DDS芯片</span></td><td><span>AD9959</span></td><td><span>4通道，500MSPS</span></td><td><span>支持多通道同步输出，相位精度高</span></td></tr><tr><td><span>过零检测</span></td><td><span>MCP6564</span></td><td><span>高速比较器</span></td><td><span>支持100kHz频率，响应速度快</span></td></tr><tr><td><span>放大器</span></td><td><span>OPA4354</span></td><td><span>4通道运放</span></td><td><span>多通道集成，带宽足够</span></td></tr><tr><td><span>偏置电压</span></td><td><span>恒压源芯片</span></td><td><span>2.5V稳定输出</span></td><td><span>保证直流偏置稳定</span></td></tr></tbody></table></figure><h3 id='23-关键电路参数'><span>2.3 关键电路参数</span></h3><h4 id='输入电路参数'><span>输入电路参数</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">输入电容: Cin = 22μF</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">输入电阻: Rin = 1kΩ</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><strong><span>最小频率计算：</span></strong>
<span>根据RC高通滤波器特性：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">f_min = 1 / (2π × R × C) = 1 / (2π × 1000 × 22×10⁻⁶) ≈ 7.2Hz</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>实际输入频率范围10Hz~100kHz远大于此值，确保信号能正常通过。</span></p><h4 id='放大器参数'><span>放大器参数</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">反馈电阻: Rf = 2.4kΩ</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">输入电阻: Ri = 1.0kΩ</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">放大器增益: G = Rf / Ri = 2.4</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><hr /><h2 id='3-硬件设计详解'><span>3. 硬件设计详解</span></h2><h3 id='31-信号路径设计'><span>3.1 信号路径设计</span></h3><h4 id='311-输入信号路径'><span>3.1.1 输入信号路径</span></h4><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 276px;" viewBox="0 0 276 606" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart1{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart1 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart1 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart1 .error-icon{fill:#a44141;}#mermaidChart1 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart1 .edge-thickness-normal{stroke-width:1px;}#mermaidChart1 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart1 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart1 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart1 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart1 .marker.cross{stroke:lightgrey;}#mermaidChart1 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart1 p{margin:0;}#mermaidChart1 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart1 .cluster-label text{fill:#F9FFFE;}#mermaidChart1 .cluster-label span{color:#F9FFFE;}#mermaidChart1 .cluster-label span p{background-color:transparent;}#mermaidChart1 .label text,#mermaidChart1 span{fill:#ccc;color:#ccc;}#mermaidChart1 .node rect,#mermaidChart1 .node circle,#mermaidChart1 .node ellipse,#mermaidChart1 .node polygon,#mermaidChart1 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart1 .rough-node .label text,#mermaidChart1 .node .label text,#mermaidChart1 .image-shape .label,#mermaidChart1 .icon-shape .label{text-anchor:middle;}#mermaidChart1 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart1 .rough-node .label,#mermaidChart1 .node .label,#mermaidChart1 .image-shape .label,#mermaidChart1 .icon-shape .label{text-align:center;}#mermaidChart1 .node.clickable{cursor:pointer;}#mermaidChart1 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart1 .arrowheadPath{fill:lightgrey;}#mermaidChart1 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart1 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart1 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart1 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart1 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart1 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart1 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart1 .cluster text{fill:#F9FFFE;}#mermaidChart1 .cluster span{color:#F9FFFE;}#mermaidChart1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart1 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart1 rect.text{fill:none;stroke-width:0;}#mermaidChart1 .icon-shape,#mermaidChart1 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart1 .icon-shape p,#mermaidChart1 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart1 .icon-shape rect,#mermaidChart1 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart1 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart1 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart1 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart1_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart1_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart1_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart1_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart1_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart1_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M138,86L138,111L138,132" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path><path d="M138,214L138,239L138,260" id="L_B_C_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path><path d="M138,342L138,367L138,388" id="L_C_D_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path><path d="M138,470L138,495L138,516" id="L_D_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart1_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A-0" transform="translate(138, 47)"><rect class="basic label-container" style="" x="-130" y="-39" width="260" height="78"></rect><g class="label" style="" transform="translate(-100, -24)"><rect></rect><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>输入信号 SIN+ COS+ SIN- COS-</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(138, 175)"><rect class="basic label-container" style="" x="-80.9609375" y="-39" width="161.921875" height="78"></rect><g class="label" style="" transform="translate(-50.9609375, -24)"><rect></rect><foreignObject width="101.921875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>22μF耦合电容<br/>去除直流偏置</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-3" transform="translate(138, 303)"><rect class="basic label-container" style="" x="-77.5859375" y="-39" width="155.171875" height="78"></rect><g class="label" style="" transform="translate(-47.5859375, -24)"><rect></rect><foreignObject width="95.171875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>1kΩ输入电阻<br/>限流保护</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-5" transform="translate(138, 431)"><rect class="basic label-container" style="" x="-95.703125" y="-39" width="191.40625" height="78"></rect><g class="label" style="" transform="translate(-65.703125, -24)"><rect></rect><foreignObject width="131.40625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>MCP6564过零检测<br/>转换为数字方波</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E-7" transform="translate(138, 559)"><rect class="basic label-container" style="" x="-92.796875" y="-39" width="185.59375" height="78"></rect><g class="label" style="" transform="translate(-62.796875, -24)"><rect></rect><foreignObject width="125.59375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>RP2040 GPIO 0~3<br/>PIO硬件测量</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><h4 id='312-输出信号路径'><span>3.1.2 输出信号路径</span></h4><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart2" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 276px;" viewBox="0 0 276 478" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart2{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart2 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart2 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart2 .error-icon{fill:#a44141;}#mermaidChart2 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart2 .edge-thickness-normal{stroke-width:1px;}#mermaidChart2 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart2 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart2 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart2 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart2 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart2 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart2 .marker.cross{stroke:lightgrey;}#mermaidChart2 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart2 p{margin:0;}#mermaidChart2 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart2 .cluster-label text{fill:#F9FFFE;}#mermaidChart2 .cluster-label span{color:#F9FFFE;}#mermaidChart2 .cluster-label span p{background-color:transparent;}#mermaidChart2 .label text,#mermaidChart2 span{fill:#ccc;color:#ccc;}#mermaidChart2 .node rect,#mermaidChart2 .node circle,#mermaidChart2 .node ellipse,#mermaidChart2 .node polygon,#mermaidChart2 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart2 .rough-node .label text,#mermaidChart2 .node .label text,#mermaidChart2 .image-shape .label,#mermaidChart2 .icon-shape .label{text-anchor:middle;}#mermaidChart2 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart2 .rough-node .label,#mermaidChart2 .node .label,#mermaidChart2 .image-shape .label,#mermaidChart2 .icon-shape .label{text-align:center;}#mermaidChart2 .node.clickable{cursor:pointer;}#mermaidChart2 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart2 .arrowheadPath{fill:lightgrey;}#mermaidChart2 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart2 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart2 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart2 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart2 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart2 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart2 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart2 .cluster text{fill:#F9FFFE;}#mermaidChart2 .cluster span{color:#F9FFFE;}#mermaidChart2 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart2 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart2 rect.text{fill:none;stroke-width:0;}#mermaidChart2 .icon-shape,#mermaidChart2 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart2 .icon-shape p,#mermaidChart2 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart2 .icon-shape rect,#mermaidChart2 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart2 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart2 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart2 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart2_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart2_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart2_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart2_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart2_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart2_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M138,86L138,111L138,132" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart2_flowchart-v2-pointEnd)"></path><path d="M138,214L138,239L138,260" id="L_B_C_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart2_flowchart-v2-pointEnd)"></path><path d="M138,342L138,367L138,388" id="L_C_D_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart2_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A-0" transform="translate(138, 47)"><rect class="basic label-container" style="" x="-96.4453125" y="-39" width="192.890625" height="78"></rect><g class="label" style="" transform="translate(-66.4453125, -24)"><rect></rect><foreignObject width="132.890625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>AD9959 DDS输出<br/>电流输出 IOUT0~3</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(138, 175)"><rect class="basic label-container" style="" x="-102.4609375" y="-39" width="204.921875" height="78"></rect><g class="label" style="" transform="translate(-72.4609375, -24)"><rect></rect><foreignObject width="144.921875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>OPA4354反相放大器<br/>转换为电压信号</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-3" transform="translate(138, 303)"><rect class="basic label-container" style="" x="-80.03125" y="-39" width="160.0625" height="78"></rect><g class="label" style="" transform="translate(-50.03125, -24)"><rect></rect><foreignObject width="100.0625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>2.5V偏置叠加<br/>恢复直流偏置</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-5" transform="translate(138, 431)"><rect class="basic label-container" style="" x="-130" y="-39" width="260" height="78"></rect><g class="label" style="" transform="translate(-100, -24)"><rect></rect><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>输出信号 SIN+ COS+ SIN- COS-</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><h3 id='32-引脚分配'><span>3.2 引脚分配</span></h3><figure class='table-figure'><table><thead><tr><th><span>功能</span></th><th><span>RP2040引脚</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>频率测量输入</span></td><td><span>GPIO 0~3</span></td><td><span>4路过零检测信号输入</span></td></tr><tr><td><span>SPI通信</span></td><td><span>GPIO 16, 18, 19, 20</span></td><td><span>SPI总线 (RX, SCK, TX, CS)</span></td></tr><tr><td><span>DDS控制</span></td><td><span>GPIO 17, 21</span></td><td><span>RESET, UPDATE</span></td></tr><tr><td><span>串口调试</span></td><td><span>UART0</span></td><td><span>115200波特率</span></td></tr></tbody></table></figure><h3 id='33-ad9959通道映射'><span>3.3 AD9959通道映射</span></h3><figure class='table-figure'><table><thead><tr><th><span>GPIO通道</span></th><th><span>信号名称</span></th><th><span>AD9959通道</span></th><th><span>DDS输出</span></th></tr></thead><tbody><tr><td><span>GPIO 0</span></td><td><span>COS-</span></td><td><span>IOUT3</span></td><td><span>OUT3</span></td></tr><tr><td><span>GPIO 1</span></td><td><span>SIN+ (参考)</span></td><td><span>IOUT0</span></td><td><span>OUT0</span></td></tr><tr><td><span>GPIO 2</span></td><td><span>COS+</span></td><td><span>IOUT1</span></td><td><span>OUT1</span></td></tr><tr><td><span>GPIO 3</span></td><td><span>SIN-</span></td><td><span>IOUT2</span></td><td><span>OUT2</span></td></tr></tbody></table></figure><hr /><h2 id='4-软件设计详解'><span>4. 软件设计详解</span></h2><h3 id='41-系统架构'><span>4.1 系统架构</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart3" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 298.29296875px;" viewBox="0 0 298.29296875 654" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart3{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart3 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart3 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart3 .error-icon{fill:#a44141;}#mermaidChart3 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart3 .edge-thickness-normal{stroke-width:1px;}#mermaidChart3 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart3 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart3 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart3 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart3 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart3 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart3 .marker.cross{stroke:lightgrey;}#mermaidChart3 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart3 p{margin:0;}#mermaidChart3 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart3 .cluster-label text{fill:#F9FFFE;}#mermaidChart3 .cluster-label span{color:#F9FFFE;}#mermaidChart3 .cluster-label span p{background-color:transparent;}#mermaidChart3 .label text,#mermaidChart3 span{fill:#ccc;color:#ccc;}#mermaidChart3 .node rect,#mermaidChart3 .node circle,#mermaidChart3 .node ellipse,#mermaidChart3 .node polygon,#mermaidChart3 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart3 .rough-node .label text,#mermaidChart3 .node .label text,#mermaidChart3 .image-shape .label,#mermaidChart3 .icon-shape .label{text-anchor:middle;}#mermaidChart3 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart3 .rough-node .label,#mermaidChart3 .node .label,#mermaidChart3 .image-shape .label,#mermaidChart3 .icon-shape .label{text-align:center;}#mermaidChart3 .node.clickable{cursor:pointer;}#mermaidChart3 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart3 .arrowheadPath{fill:lightgrey;}#mermaidChart3 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart3 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart3 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart3 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart3 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart3 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart3 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart3 .cluster text{fill:#F9FFFE;}#mermaidChart3 .cluster span{color:#F9FFFE;}#mermaidChart3 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart3 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart3 rect.text{fill:none;stroke-width:0;}#mermaidChart3 .icon-shape,#mermaidChart3 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart3 .icon-shape p,#mermaidChart3 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart3 .icon-shape rect,#mermaidChart3 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart3 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart3 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart3 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart3_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart3_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart3_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart3_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart3_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart3_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M149.377,62L115.195,87L115.195,108" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart3_flowchart-v2-pointEnd)"></path><path d="M115.195,190L115.195,215L115.195,236" id="L_B_C_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart3_flowchart-v2-pointEnd)"></path><path d="M115.195,342L115.195,367L115.195,388" id="L_C_D_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart3_flowchart-v2-pointEnd)"></path><path d="M115.195,494L115.195,519L135.85,541.079" id="L_D_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart3_flowchart-v2-pointEnd)"></path><path d="M234.003,544L257.391,519L257.391,443L257.391,367L257.391,291L257.391,215L257.391,151L257.391,87L226.438,64.361" id="L_E_A_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart3_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A-0" transform="translate(186.29296875, 35)"><rect class="basic label-container" style="" x="-72" y="-27" width="144" height="54"></rect><g class="label" style="" transform="translate(-42, -12)"><rect></rect><foreignObject width="84" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>主循环开始</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(115.1953125, 151)"><rect class="basic label-container" style="" x="-107.1953125" y="-39" width="214.390625" height="78"></rect><g class="label" style="" transform="translate(-77.1953125, -24)"><rect></rect><foreignObject width="154.390625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>串口命令解析<br/>倍频系数设置 2~20倍</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-3" transform="translate(115.1953125, 291)"><rect class="basic label-container" style="" x="-96.875" y="-51" width="193.75" height="102"></rect><g class="label" style="" transform="translate(-66.875, -36)"><rect></rect><foreignObject width="133.75" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>频率测量 每100ms<br/>PIO0硬件计数<br/>EMA滤波</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-5" transform="translate(115.1953125, 443)"><rect class="basic label-container" style="" x="-80.2734375" y="-51" width="160.546875" height="102"></rect><g class="label" style="" transform="translate(-50.2734375, -36)"><rect></rect><foreignObject width="100.546875" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>相位测量<br/>PIO1硬件测量<br/>相位校准</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E-7" transform="translate(186.29296875, 595)"><rect class="basic label-container" style="" x="-104" y="-51" width="208" height="102"></rect><g class="label" style="" transform="translate(-74, -36)"><rect></rect><foreignObject width="148" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>DDS输出更新<br/>频率计算和幅度补偿<br/>相位设置 正交输出</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><h3 id='42-核心算法'><span>4.2 核心算法</span></h3><h4 id='421-频率测量算法'><span>4.2.1 频率测量算法</span></h4><p><strong><span>硬件测量（PIO）：</span></strong></p><ul><li><p><span>使用PIO0的4个状态机（SM0~SM3）分别测量4路信号</span></p></li><li><p><span>每个SM持续计数上升沿，CPU定期读取计数值</span></p></li><li><p><span>测量方法：门控计数法（Gate Method）</span></p></li></ul><p><strong><span>频率计算公式：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cpp"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">freq</span> <span class="cm-operator">=</span> (<span class="cm-variable">delta_edges</span> <span class="cm-variable">×</span> <span class="cm-number">1</span>,<span class="cm-number">000</span>,<span class="cm-number">000</span>) <span class="cm-operator">/</span> <span class="cm-variable">delta_us</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>软件滤波：</span></strong></p><ul><li><p><span>双样本确认：新频率必须在pending_freq的98%~102%范围内才接受</span></p></li><li><p><span>EMA滤波：α = 0.2，快速响应</span></p></li><li><p><span>自适应重置：频率变化&gt;1%时立即重置EMA，保证快速跟踪</span></p></li></ul><h4 id='422-相位测量算法'><span>4.2.2 相位测量算法</span></h4><p><strong><span>硬件测量（PIO）：</span></strong></p><ul><li><p><span>使用PIO1的3个状态机测量相位差</span></p></li><li><p><span>参考信号：SIN+ (GPIO1)</span></p></li><li><p><span>测量目标：COS- (GPIO0), COS+ (GPIO2), SIN- (GPIO3)</span></p></li></ul><p><strong><span>相位计算公式：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cpp"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">period_counts</span> <span class="cm-operator">=</span> <span class="cm-variable">F_CPU</span> <span class="cm-operator">/</span> <span class="cm-variable">ref_freq</span> <span class="cm-operator">/</span> <span class="cm-number">2.0</span> &nbsp;<span class="cm-comment">// PIO循环周期数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">phase_deg</span> <span class="cm-operator">=</span> (<span class="cm-variable">delta_counts</span> <span class="cm-operator">/</span> <span class="cm-variable">period_counts</span>) <span class="cm-variable">×</span> <span class="cm-number">360.0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><strong><span>相位校准：</span></strong></p><ul><li><p><span>测量输入信号的相位偏差</span></p></li><li><p><span>输出时补偿偏差，确保输出信号精确正交</span></p></li></ul><h4 id='423-幅度补偿算法acr智能调节'><span>4.2.3 幅度补偿算法（ACR智能调节）</span></h4><p><strong><span>问题：</span></strong><span> 放大器在不同频率下增益不同，需要补偿以保持1Vpp输出。</span></p><p><strong><span>解决方案：</span></strong><span> 双点校准 + 线性插值</span></p><p><strong><span>校准参数：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cpp"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CAL_FREQ_LOW</span> &nbsp;<span class="cm-operator">=</span> <span class="cm-number">1kHz</span> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// 低频校准点</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CAL_VPP_LOW</span> &nbsp; <span class="cm-operator">=</span> <span class="cm-number">1216mV</span> &nbsp; &nbsp;<span class="cm-comment">// 1kHz时ACR=1023的输出VPP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CAL_FREQ_HIGH</span> <span class="cm-operator">=</span> <span class="cm-number">2MHz</span> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// 高频校准点</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CAL_VPP_HIGH</span> &nbsp;<span class="cm-operator">=</span> <span class="cm-number">1149mV</span> &nbsp; &nbsp;<span class="cm-comment">// 2MHz时ACR=1023的输出VPP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">TARGET_VPP</span> &nbsp; &nbsp;<span class="cm-operator">=</span> <span class="cm-number">1000mV</span> &nbsp; &nbsp;<span class="cm-comment">// 目标输出VPP</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><strong><span>ACR计算公式：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cpp"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 1. 计算校准点ACR值</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CAL_ACR_LOW</span> &nbsp;<span class="cm-operator">=</span> <span class="cm-number">1023</span> <span class="cm-variable">×</span> (<span class="cm-variable">TARGET_VPP</span> <span class="cm-operator">/</span> <span class="cm-variable">CAL_VPP_LOW</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CAL_ACR_HIGH</span> <span class="cm-operator">=</span> <span class="cm-number">1023</span> <span class="cm-variable">×</span> (<span class="cm-variable">TARGET_VPP</span> <span class="cm-operator">/</span> <span class="cm-variable">CAL_VPP_HIGH</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 2. 线性插值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-variable">freq</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">CAL_FREQ_LOW</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ACR</span> <span class="cm-operator">=</span> <span class="cm-variable">CAL_ACR_LOW</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">freq</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">CAL_FREQ_HIGH</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ACR</span> <span class="cm-operator">=</span> <span class="cm-variable">CAL_ACR_HIGH</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">slope</span> <span class="cm-operator">=</span> (<span class="cm-variable">CAL_ACR_HIGH</span> <span class="cm-operator">-</span> <span class="cm-variable">CAL_ACR_LOW</span>) <span class="cm-operator">/</span> (<span class="cm-variable">CAL_FREQ_HIGH</span> <span class="cm-operator">-</span> <span class="cm-variable">CAL_FREQ_LOW</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ACR</span> <span class="cm-operator">=</span> <span class="cm-variable">CAL_ACR_LOW</span> <span class="cm-operator">+</span> (<span class="cm-variable">freq</span> <span class="cm-operator">-</span> <span class="cm-variable">CAL_FREQ_LOW</span>) <span class="cm-variable">×</span> <span class="cm-variable">slope</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><h4 id='424-dds频率设置算法'><span>4.2.4 DDS频率设置算法</span></h4><p><strong><span>频率调谐字（FTW）计算：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cpp"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">FTW</span> <span class="cm-operator">=</span> (<span class="cm-variable">freq_hz</span> <span class="cm-variable">×</span> <span class="cm-number">2</span><span class="cm-variable">³²</span>) <span class="cm-operator">/</span> <span class="cm-variable">current_sys_clk</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>系统时钟：</span></strong></p><ul><li><p><span>基准时钟：25MHz</span></p></li><li><p><span>PLL倍频：4倍（默认）</span></p></li><li><p><span>系统时钟：100MHz</span></p></li></ul><p><strong><span>输出频率限制：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cpp"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">max_output_freq</span> <span class="cm-operator">=</span> <span class="cm-variable">current_sys_clk</span> <span class="cm-operator">/</span> <span class="cm-number">2</span> &nbsp;<span class="cm-comment">// 奈奎斯特定理</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><hr /><h2 id='5-时序分析'><span>5. 时序分析</span></h2><h3 id='51-信号处理时序链'><span>5.1 信号处理时序链</span></h3><p><span>时间轴分析（以100kHz输入信号为例）：</span></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart4" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 276px;" viewBox="0 0 276 1270" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart4{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart4 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart4 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart4 .error-icon{fill:#a44141;}#mermaidChart4 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart4 .edge-thickness-normal{stroke-width:1px;}#mermaidChart4 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart4 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart4 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart4 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart4 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart4 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart4 .marker.cross{stroke:lightgrey;}#mermaidChart4 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart4 p{margin:0;}#mermaidChart4 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart4 .cluster-label text{fill:#F9FFFE;}#mermaidChart4 .cluster-label span{color:#F9FFFE;}#mermaidChart4 .cluster-label span p{background-color:transparent;}#mermaidChart4 .label text,#mermaidChart4 span{fill:#ccc;color:#ccc;}#mermaidChart4 .node rect,#mermaidChart4 .node circle,#mermaidChart4 .node ellipse,#mermaidChart4 .node polygon,#mermaidChart4 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart4 .rough-node .label text,#mermaidChart4 .node .label text,#mermaidChart4 .image-shape .label,#mermaidChart4 .icon-shape .label{text-anchor:middle;}#mermaidChart4 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart4 .rough-node .label,#mermaidChart4 .node .label,#mermaidChart4 .image-shape .label,#mermaidChart4 .icon-shape .label{text-align:center;}#mermaidChart4 .node.clickable{cursor:pointer;}#mermaidChart4 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart4 .arrowheadPath{fill:lightgrey;}#mermaidChart4 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart4 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart4 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart4 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart4 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart4 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart4 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart4 .cluster text{fill:#F9FFFE;}#mermaidChart4 .cluster span{color:#F9FFFE;}#mermaidChart4 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart4 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart4 rect.text{fill:none;stroke-width:0;}#mermaidChart4 .icon-shape,#mermaidChart4 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart4 .icon-shape p,#mermaidChart4 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart4 .icon-shape rect,#mermaidChart4 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart4 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart4 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart4 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart4_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart4_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart4_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart4_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart4_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart4_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M138,62L138,87L138,108" id="L_T0_T1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path><path d="M138,190L138,215L138,236" id="L_T1_T2_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path><path d="M138,366L138,391L138,412" id="L_T2_T3_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path><path d="M138,494L138,519L138,540" id="L_T3_T4_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path><path d="M138,646L138,671L138,692" id="L_T4_T5_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path><path d="M138,774L138,799L138,820" id="L_T5_T6_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path><path d="M138,902L138,927L138,948" id="L_T6_T7_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path><path d="M138,1030L138,1055L138,1076" id="L_T7_T8_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path><path d="M138,1158L138,1183L138,1204" id="L_T8_T9_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart4_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-T0-0" transform="translate(138, 35)"><rect class="basic label-container" style="" x="-91.25" y="-27" width="182.5" height="54"></rect><g class="label" style="" transform="translate(-61.25, -12)"><rect></rect><foreignObject width="122.5" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T0 输入信号到达</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T1-1" transform="translate(138, 151)"><rect class="basic label-container" style="" x="-125.3671875" y="-39" width="250.734375" height="78"></rect><g class="label" style="" transform="translate(-95.3671875, -24)"><rect></rect><foreignObject width="190.734375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T1 过零检测延迟 MCP6564<br/>约50ns 比较器响应</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T2-3" transform="translate(138, 303)"><rect class="basic label-container" style="" x="-130" y="-63" width="260" height="126"></rect><g class="label" style="" transform="translate(-100, -48)"><rect></rect><foreignObject width="200" height="96"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>T2 PIO硬件测量<br/>频率连续计数 相位等一周期<br/>100kHz周期10μs</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T3-5" transform="translate(138, 455)"><rect class="basic label-container" style="" x="-118.609375" y="-39" width="237.21875" height="78"></rect><g class="label" style="" transform="translate(-88.609375, -24)"><rect></rect><foreignObject width="177.21875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T3 CPU读取PIO数据<br/>频率与相位读取 约100ns</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T4-7" transform="translate(138, 595)"><rect class="basic label-container" style="" x="-115.6328125" y="-51" width="231.265625" height="102"></rect><g class="label" style="" transform="translate(-85.6328125, -36)"><rect></rect><foreignObject width="171.265625" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T4 软件处理<br/>频率 EMA 相位 ACR计算<br/>总计约3μs</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T5-9" transform="translate(138, 735)"><rect class="basic label-container" style="" x="-114.6015625" y="-39" width="229.203125" height="78"></rect><g class="label" style="" transform="translate(-84.6015625, -24)"><rect></rect><foreignObject width="169.203125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T5 SPI通信 AD9959配置<br/>4通道 约180μs</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T6-11" transform="translate(138, 863)"><rect class="basic label-container" style="" x="-98.4921875" y="-39" width="196.984375" height="78"></rect><g class="label" style="" transform="translate(-68.4921875, -24)"><rect></rect><foreignObject width="136.984375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T6 IO_UPDATE触发<br/>约2μs</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T7-13" transform="translate(138, 991)"><rect class="basic label-container" style="" x="-101.65625" y="-39" width="203.3125" height="78"></rect><g class="label" style="" transform="translate(-71.65625, -24)"><rect></rect><foreignObject width="143.3125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T7 AD9959输出更新<br/>约1μs</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T8-15" transform="translate(138, 1119)"><rect class="basic label-container" style="" x="-93.0703125" y="-39" width="186.140625" height="78"></rect><g class="label" style="" transform="translate(-63.0703125, -24)"><rect></rect><foreignObject width="126.140625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T8 放大器响应<br/>约100ns OPA4354</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-T9-17" transform="translate(138, 1235)"><rect class="basic label-container" style="" x="-91.25" y="-27" width="182.5" height="54"></rect><g class="label" style="" transform="translate(-61.25, -12)"><rect></rect><foreignObject width="122.5" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>T9 输出信号稳定</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><h3 id='52-总延迟计算'><span>5.2 总延迟计算</span></h3><p><strong><span>单次更新延迟：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">总延迟 = T1 + T2 + T3 + T4 + T5 + T6 + T7 + T8</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; = 0.05μs + 10μs + 0.1μs + 3μs + 180μs + 2μs + 1μs + 0.1μs</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; ≈ 196.25μs</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><strong><span>系统更新周期：</span></strong></p><ul><li><p><span>更新间隔：100ms（UPDATE_INTERVAL_MS）</span></p></li><li><p><span>对于100kHz信号：100ms内包含10,000个周期</span></p></li><li><p><span>延迟占比：196.25μs / 100ms = 0.196%</span></p></li></ul><p><strong><span>结论：</span></strong><span> 系统延迟远小于更新周期，能够实时跟踪频率变化。</span></p><h3 id='53-频率跟踪性能'><span>5.3 频率跟踪性能</span></h3><figure class='table-figure'><table><thead><tr><th><span>输入频率变化</span></th><th><span>跟踪时间</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>1kHz步进</span></td><td><span>&lt;100ms</span></td><td><span>EMA重置阈值1%，快速响应</span></td></tr><tr><td><span>10kHz步进</span></td><td><span>&lt;100ms</span></td><td><span>立即响应，EMA重置</span></td></tr><tr><td><span>100kHz步进</span></td><td><span>&lt;100ms</span></td><td><span>立即响应，EMA重置</span></td></tr></tbody></table></figure><hr /><h2 id='6-代码设计流程'><span>6. 代码设计流程</span></h2><h3 id='61-系统初始化流程'><span>6.1 系统初始化流程</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart5" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 224.546875px;" viewBox="0 0 224.546875 1006" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart5{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart5 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart5 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart5 .error-icon{fill:#a44141;}#mermaidChart5 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart5 .edge-thickness-normal{stroke-width:1px;}#mermaidChart5 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart5 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart5 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart5 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart5 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart5 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart5 .marker.cross{stroke:lightgrey;}#mermaidChart5 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart5 p{margin:0;}#mermaidChart5 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart5 .cluster-label text{fill:#F9FFFE;}#mermaidChart5 .cluster-label span{color:#F9FFFE;}#mermaidChart5 .cluster-label span p{background-color:transparent;}#mermaidChart5 .label text,#mermaidChart5 span{fill:#ccc;color:#ccc;}#mermaidChart5 .node rect,#mermaidChart5 .node circle,#mermaidChart5 .node ellipse,#mermaidChart5 .node polygon,#mermaidChart5 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart5 .rough-node .label text,#mermaidChart5 .node .label text,#mermaidChart5 .image-shape .label,#mermaidChart5 .icon-shape .label{text-anchor:middle;}#mermaidChart5 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart5 .rough-node .label,#mermaidChart5 .node .label,#mermaidChart5 .image-shape .label,#mermaidChart5 .icon-shape .label{text-align:center;}#mermaidChart5 .node.clickable{cursor:pointer;}#mermaidChart5 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart5 .arrowheadPath{fill:lightgrey;}#mermaidChart5 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart5 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart5 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart5 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart5 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart5 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart5 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart5 .cluster text{fill:#F9FFFE;}#mermaidChart5 .cluster span{color:#F9FFFE;}#mermaidChart5 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart5 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart5 rect.text{fill:none;stroke-width:0;}#mermaidChart5 .icon-shape,#mermaidChart5 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart5 .icon-shape p,#mermaidChart5 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart5 .icon-shape rect,#mermaidChart5 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart5 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart5 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart5 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart5_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart5_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart5_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart5_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart5_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart5_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M112.273,62L112.273,87L112.273,108" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path><path d="M112.273,166L112.273,191L112.273,212" id="L_B_C_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path><path d="M112.273,270L112.273,295L112.273,316" id="L_C_D_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path><path d="M112.273,374L112.273,399L112.273,420" id="L_D_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path><path d="M112.273,478L112.273,503L112.273,524" id="L_E_F_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path><path d="M112.273,582L112.273,607L112.273,628" id="L_F_G_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path><path d="M112.273,686L112.273,711L112.273,732" id="L_G_H_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path><path d="M112.273,790L112.273,815L112.273,836" id="L_H_I_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path><path d="M112.273,894L112.273,919L112.273,940" id="L_I_J_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart5_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A-0" transform="translate(112.2734375, 35)"><rect class="basic label-container" style="" x="-64" y="-27" width="128" height="54"></rect><g class="label" style="" transform="translate(-34, -12)"><rect></rect><foreignObject width="68" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>系统上电</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(112.2734375, 139)"><rect class="basic label-container" style="" x="-99.5859375" y="-27" width="199.171875" height="54"></rect><g class="label" style="" transform="translate(-69.5859375, -12)"><rect></rect><foreignObject width="139.171875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>串口初始化 115200</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-3" transform="translate(112.2734375, 243)"><rect class="basic label-container" style="" x="-89.5625" y="-27" width="179.125" height="54"></rect><g class="label" style="" transform="translate(-59.5625, -12)"><rect></rect><foreignObject width="119.125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>DDS GPIO初始化</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-5" transform="translate(112.2734375, 347)"><rect class="basic label-container" style="" x="-87.8515625" y="-27" width="175.703125" height="54"></rect><g class="label" style="" transform="translate(-57.8515625, -12)"><rect></rect><foreignObject width="115.703125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>SPI初始化 2MHz</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E-7" transform="translate(112.2734375, 451)"><rect class="basic label-container" style="" x="-61.6640625" y="-27" width="123.328125" height="54"></rect><g class="label" style="" transform="translate(-31.6640625, -12)"><rect></rect><foreignObject width="63.328125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>DDS复位</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-F-9" transform="translate(112.2734375, 555)"><rect class="basic label-container" style="" x="-87.1796875" y="-27" width="174.359375" height="54"></rect><g class="label" style="" transform="translate(-57.1796875, -12)"><rect></rect><foreignObject width="114.359375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>设置PLL倍频 x4</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G-11" transform="translate(112.2734375, 659)"><rect class="basic label-container" style="" x="-104.2734375" y="-27" width="208.546875" height="54"></rect><g class="label" style="" transform="translate(-74.2734375, -12)"><rect></rect><foreignObject width="148.546875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>初始化PIO0频率测量</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H-13" transform="translate(112.2734375, 763)"><rect class="basic label-container" style="" x="-104.2734375" y="-27" width="208.546875" height="54"></rect><g class="label" style="" transform="translate(-74.2734375, -12)"><rect></rect><foreignObject width="148.546875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>初始化PIO1相位测量</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-I-15" transform="translate(112.2734375, 867)"><rect class="basic label-container" style="" x="-92.1953125" y="-27" width="184.390625" height="54"></rect><g class="label" style="" transform="translate(-62.1953125, -12)"><rect></rect><foreignObject width="124.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>设置初始频率为0</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-J-17" transform="translate(112.2734375, 971)"><rect class="basic label-container" style="" x="-64" y="-27" width="128" height="54"></rect><g class="label" style="" transform="translate(-34, -12)"><rect></rect><foreignObject width="68" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>系统就绪</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><h3 id='62-主循环流程'><span>6.2 主循环流程</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart6" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 507.34375px;" viewBox="0 0 507.34375 1699.625" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart6{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart6 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart6 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart6 .error-icon{fill:#a44141;}#mermaidChart6 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart6 .edge-thickness-normal{stroke-width:1px;}#mermaidChart6 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart6 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart6 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart6 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart6 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart6 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart6 .marker.cross{stroke:lightgrey;}#mermaidChart6 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart6 p{margin:0;}#mermaidChart6 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart6 .cluster-label text{fill:#F9FFFE;}#mermaidChart6 .cluster-label span{color:#F9FFFE;}#mermaidChart6 .cluster-label span p{background-color:transparent;}#mermaidChart6 .label text,#mermaidChart6 span{fill:#ccc;color:#ccc;}#mermaidChart6 .node rect,#mermaidChart6 .node circle,#mermaidChart6 .node ellipse,#mermaidChart6 .node polygon,#mermaidChart6 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart6 .rough-node .label text,#mermaidChart6 .node .label text,#mermaidChart6 .image-shape .label,#mermaidChart6 .icon-shape .label{text-anchor:middle;}#mermaidChart6 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart6 .rough-node .label,#mermaidChart6 .node .label,#mermaidChart6 .image-shape .label,#mermaidChart6 .icon-shape .label{text-align:center;}#mermaidChart6 .node.clickable{cursor:pointer;}#mermaidChart6 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart6 .arrowheadPath{fill:lightgrey;}#mermaidChart6 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart6 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart6 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart6 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart6 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart6 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart6 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart6 .cluster text{fill:#F9FFFE;}#mermaidChart6 .cluster span{color:#F9FFFE;}#mermaidChart6 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart6 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart6 rect.text{fill:none;stroke-width:0;}#mermaidChart6 .icon-shape,#mermaidChart6 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart6 .icon-shape p,#mermaidChart6 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart6 .icon-shape rect,#mermaidChart6 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart6 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart6 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart6 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart6_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart6_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart6_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart6_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart6_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart6_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M336.48,51.475L181.227,87L181.648,108.501" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M154.715,229.363L115.727,292.875L115.727,325.875" id="L_B_C_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M115.727,383.875L115.727,420.875L115.727,453.875" id="L_C_D_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M115.727,511.875L115.727,536.875L247.156,607.362" id="L_D_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M219.481,218.621L301.543,292.875L301.543,356.875L301.543,420.875L301.543,484.875L301.543,536.875L300.851,561.557" id="L_B_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M342.539,607.356L458.813,536.875L458.813,484.875L458.813,420.875L458.813,356.875L458.813,292.875L458.813,183.938L458.813,87L437.396,64.874" id="L_E_A_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M297.559,706.25L297.059,742.75L297.059,775.75" id="L_E_F_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M297.059,833.75L297.059,858.75L297.059,879.75" id="L_F_G_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M297.059,937.75L297.059,962.75L297.48,984.251" id="L_G_H_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M324.989,1120.695L358.148,1184.625L358.148,1248.625L358.148,1300.625L358.148,1352.625L358.148,1404.625L358.148,1456.625L358.148,1508.625L358.148,1529.625" id="L_H_I_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M248.497,1099.063L111.242,1184.625L111.242,1217.625" id="L_H_J_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M111.242,1275.625L111.242,1300.625L111.242,1321.625" id="L_J_K_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M111.242,1379.625L111.242,1404.625L111.242,1425.625" id="L_K_L_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M111.242,1483.625L111.242,1508.625L111.242,1529.625" id="L_L_M_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M111.242,1587.625L111.242,1612.625L335.4,1650.457" id="L_M_N_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M454.376,1637.625L486.813,1612.625L486.813,1560.625L486.813,1508.625L486.813,1456.625L486.813,1404.625L486.813,1352.625L486.813,1300.625L486.813,1248.625L486.813,1184.625L486.813,1067.688L486.813,962.75L486.813,910.75L486.813,858.75L486.813,806.75L486.813,742.75L486.813,633.813L486.813,536.875L486.813,484.875L486.813,420.875L486.813,356.875L486.813,292.875L486.813,183.938L486.813,87L452.485,64.212" id="L_N_A_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path><path d="M358.148,1587.625L358.148,1612.625L384.521,1635.035" id="L_I_N_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart6_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(115.7265625, 292.875)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>是</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(301.54296875, 420.875)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>否</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(458.8125, 356.875)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>否</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(297.05859375, 742.75)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>是</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(358.1484375, 1352.625)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>否</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(111.2421875, 1184.625)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>是</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A-0" transform="translate(408.48046875, 35)"><rect class="basic label-container" style="" x="-72" y="-27" width="144" height="54"></rect><g class="label" style="" transform="translate(-42, -12)"><rect></rect><foreignObject width="84" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>主循环开始</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(181.2265625, 183.9375)"><polygon points="71.9375,0 143.875,-71.9375 71.9375,-143.875 0,-71.9375" class="label-container" transform="translate(-71.9375,71.9375)"></polygon><g class="label" style="" transform="translate(-44.9375, -12)"><rect></rect><foreignObject width="89.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>串口有数据?</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-3" transform="translate(115.7265625, 356.875)"><rect class="basic label-container" style="" x="-96" y="-27" width="192" height="54"></rect><g class="label" style="" transform="translate(-66, -12)"><rect></rect><foreignObject width="132" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>解析倍频系数命令</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-5" transform="translate(115.7265625, 484.875)"><rect class="basic label-container" style="" x="-91.9609375" y="-27" width="183.921875" height="54"></rect><g class="label" style="" transform="translate(-61.9609375, -12)"><rect></rect><foreignObject width="123.921875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>更新multiplier_n</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E-7" transform="translate(297.05859375, 633.8125)"><polygon points="71.9375,0 143.875,-71.9375 71.9375,-143.875 0,-71.9375" class="label-container" transform="translate(-71.9375,71.9375)"></polygon><g class="label" style="" transform="translate(-44.9375, -12)"><rect></rect><foreignObject width="89.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>更新间隔到?</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-F-13" transform="translate(297.05859375, 806.75)"><rect class="basic label-container" style="" x="-76.1953125" y="-27" width="152.390625" height="54"></rect><g class="label" style="" transform="translate(-46.1953125, -12)"><rect></rect><foreignObject width="92.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>采样4路频率</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G-15" transform="translate(297.05859375, 910.75)"><rect class="basic label-container" style="" x="-76.1953125" y="-27" width="152.390625" height="54"></rect><g class="label" style="" transform="translate(-46.1953125, -12)"><rect></rect><foreignObject width="92.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>采样3路相位</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H-17" transform="translate(297.05859375, 1067.6875)"><polygon points="79.9375,0 159.875,-79.9375 79.9375,-159.875 0,-79.9375" class="label-container" transform="translate(-79.9375,79.9375)"></polygon><g class="label" style="" transform="translate(-52.9375, -12)"><rect></rect><foreignObject width="105.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>参考信号存在?</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-I-19" transform="translate(358.1484375, 1560.625)"><rect class="basic label-container" style="" x="-93.6640625" y="-27" width="187.328125" height="54"></rect><g class="label" style="" transform="translate(-63.6640625, -12)"><rect></rect><foreignObject width="127.328125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>关闭所有DDS输出</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-J-21" transform="translate(111.2421875, 1248.625)"><rect class="basic label-container" style="" x="-80" y="-27" width="160" height="54"></rect><g class="label" style="" transform="translate(-50, -12)"><rect></rect><foreignObject width="100" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>计算输出频率</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-K-23" transform="translate(111.2421875, 1352.625)"><rect class="basic label-container" style="" x="-94.1640625" y="-27" width="188.328125" height="54"></rect><g class="label" style="" transform="translate(-64.1640625, -12)"><rect></rect><foreignObject width="128.328125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>计算ACR幅度补偿</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L-25" transform="translate(111.2421875, 1456.625)"><rect class="basic label-container" style="" x="-89.859375" y="-27" width="179.71875" height="54"></rect><g class="label" style="" transform="translate(-59.859375, -12)"><rect></rect><foreignObject width="119.71875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>配置4路DDS通道</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-M-27" transform="translate(111.2421875, 1560.625)"><rect class="basic label-container" style="" x="-103.2421875" y="-27" width="206.484375" height="54"></rect><g class="label" style="" transform="translate(-73.2421875, -12)"><rect></rect><foreignObject width="146.484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>原子更新IO_UPDATE</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-N-29" transform="translate(419.34375, 1664.625)"><rect class="basic label-container" style="" x="-80" y="-27" width="160" height="54"></rect><g class="label" style="" transform="translate(-50, -12)"><rect></rect><foreignObject width="100" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>打印状态信息</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><h3 id='63-频率测量流程'><span>6.3 频率测量流程</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart7" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 740.05859375px;" viewBox="0 0 740.05859375 1440.140625" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart7{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart7 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart7 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart7 .error-icon{fill:#a44141;}#mermaidChart7 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart7 .edge-thickness-normal{stroke-width:1px;}#mermaidChart7 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart7 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart7 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart7 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart7 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart7 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart7 .marker.cross{stroke:lightgrey;}#mermaidChart7 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart7 p{margin:0;}#mermaidChart7 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart7 .cluster-label text{fill:#F9FFFE;}#mermaidChart7 .cluster-label span{color:#F9FFFE;}#mermaidChart7 .cluster-label span p{background-color:transparent;}#mermaidChart7 .label text,#mermaidChart7 span{fill:#ccc;color:#ccc;}#mermaidChart7 .node rect,#mermaidChart7 .node circle,#mermaidChart7 .node ellipse,#mermaidChart7 .node polygon,#mermaidChart7 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart7 .rough-node .label text,#mermaidChart7 .node .label text,#mermaidChart7 .image-shape .label,#mermaidChart7 .icon-shape .label{text-anchor:middle;}#mermaidChart7 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart7 .rough-node .label,#mermaidChart7 .node .label,#mermaidChart7 .image-shape .label,#mermaidChart7 .icon-shape .label{text-align:center;}#mermaidChart7 .node.clickable{cursor:pointer;}#mermaidChart7 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart7 .arrowheadPath{fill:lightgrey;}#mermaidChart7 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart7 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart7 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart7 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart7 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart7 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart7 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart7 .cluster text{fill:#F9FFFE;}#mermaidChart7 .cluster span{color:#F9FFFE;}#mermaidChart7 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart7 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart7 rect.text{fill:none;stroke-width:0;}#mermaidChart7 .icon-shape,#mermaidChart7 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart7 .icon-shape p,#mermaidChart7 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart7 .icon-shape rect,#mermaidChart7 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart7 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart7 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart7 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart7_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart7_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart7_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart7_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart7_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart7_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M379.895,62L379.895,87L379.895,108" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M379.895,166L379.895,191L379.895,212" id="L_B_C_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M379.895,270L379.895,295L380.316,316.501" id="L_C_D_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M333.583,401.564L104,484.875L104,548.875L104,600.875L104,652.875L104,704.875L104,798.875L104,904.875L104,1019.008L104,1133.141L104,1197.141L104,1249.141L104,1270.141" id="L_D_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M415.63,413.14L503.809,484.875L503.809,517.875" id="L_D_F_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M503.809,575.875L503.809,600.875L503.809,621.875" id="L_F_G_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M503.809,679.875L503.809,704.875L504.23,726.376" id="L_G_H_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M468.267,832.334L387.895,904.875L388.341,938.375" id="L_H_I_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M544.542,828.142L652.059,904.875L652.059,1019.008L652.059,1133.141L652.059,1197.141L652.059,1249.141L652.059,1270.141" id="L_H_J_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M352.487,1060.733L288.484,1133.141L288.484,1166.141" id="L_I_K_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M424.302,1060.733L487.305,1133.141L487.305,1166.141" id="L_I_L_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M288.484,1224.141L288.484,1249.141L332.733,1272.287" id="L_K_M_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M487.305,1224.141L487.305,1249.141L443.056,1272.287" id="L_L_M_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M387.895,1328.141L387.895,1353.141L387.895,1374.141" id="L_M_N_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M104,1328.141L104,1353.141L303.96,1389.767" id="L_E_N_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path><path d="M652.059,1328.141L652.059,1353.141L471.819,1388.62" id="L_J_N_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart7_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(104, 798.875)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>是</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(503.80859375, 484.875)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>否</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(387.89453125, 904.875)"><g class="label" transform="translate(-16, -12)"><foreignObject width="32" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>通过</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(652.05859375, 1133.140625)"><g class="label" transform="translate(-16, -12)"><foreignObject width="32" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>失败</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(288.484375, 1133.140625)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>是</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(487.3046875, 1133.140625)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>否</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A-0" transform="translate(379.89453125, 35)"><rect class="basic label-container" style="" x="-110.40625" y="-27" width="220.8125" height="54"></rect><g class="label" style="" transform="translate(-80.40625, -12)"><rect></rect><foreignObject width="160.8125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>sampleFrequency调用</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(379.89453125, 139)"><rect class="basic label-container" style="" x="-92.078125" y="-27" width="184.15625" height="54"></rect><g class="label" style="" transform="translate(-62.078125, -12)"><rect></rect><foreignObject width="124.15625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>读取PIO边沿计数</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-3" transform="translate(379.89453125, 243)"><rect class="basic label-container" style="" x="-95.5234375" y="-27" width="191.046875" height="54"></rect><g class="label" style="" transform="translate(-65.5234375, -12)"><rect></rect><foreignObject width="131.046875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>读取时间戳micros</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-5" transform="translate(379.89453125, 383.9375)"><polygon points="63.9375,0 127.875,-63.9375 63.9375,-127.875 0,-63.9375" class="label-container" transform="translate(-63.9375,63.9375)"></polygon><g class="label" style="" transform="translate(-36.9375, -12)"><rect></rect><foreignObject width="73.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>首次采样?</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E-7" transform="translate(104, 1301.140625)"><rect class="basic label-container" style="" x="-96" y="-27" width="192" height="54"></rect><g class="label" style="" transform="translate(-66, -12)"><rect></rect><foreignObject width="132" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>保存计数和时间戳</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-F-9" transform="translate(503.80859375, 548.875)"><rect class="basic label-container" style="" x="-129.546875" y="-27" width="259.09375" height="54"></rect><g class="label" style="" transform="translate(-99.546875, -12)"><rect></rect><foreignObject width="199.09375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>计算delta_edges和delta_us</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G-11" transform="translate(503.80859375, 652.875)"><rect class="basic label-container" style="" x="-81.296875" y="-27" width="162.59375" height="54"></rect><g class="label" style="" transform="translate(-51.296875, -12)"><rect></rect><foreignObject width="102.59375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>计算频率 freq</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H-13" transform="translate(503.80859375, 798.875)"><polygon points="69,0 138,-69 69,-138 0,-69" class="label-container" transform="translate(-69,69)"></polygon><g class="label" style="" transform="translate(-42, -12)"><rect></rect><foreignObject width="84" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>双样本确认</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-I-15" transform="translate(387.89453125, 1019.0078125)"><polygon points="77.1328125,0 154.265625,-77.1328125 77.1328125,-154.265625 0,-77.1328125" class="label-container" transform="translate(-77.1328125,77.1328125)"></polygon><g class="label" style="" transform="translate(-50.1328125, -12)"><rect></rect><foreignObject width="100.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>频率变化&gt;1%?</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-J-17" transform="translate(652.05859375, 1301.140625)"><rect class="basic label-container" style="" x="-80" y="-27" width="160" height="54"></rect><g class="label" style="" transform="translate(-50, -12)"><rect></rect><foreignObject width="100" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>丢弃本次测量</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-K-19" transform="translate(288.484375, 1197.140625)"><rect class="basic label-container" style="" x="-86.140625" y="-27" width="172.28125" height="54"></rect><g class="label" style="" transform="translate(-56.140625, -12)"><rect></rect><foreignObject width="112.28125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>重置EMA = freq</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L-21" transform="translate(487.3046875, 1197.140625)"><rect class="basic label-container" style="" x="-62.6796875" y="-27" width="125.359375" height="54"></rect><g class="label" style="" transform="translate(-32.6796875, -12)"><rect></rect><foreignObject width="65.359375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>EMA滤波</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-M-23" transform="translate(387.89453125, 1301.140625)"><rect class="basic label-container" style="" x="-101.828125" y="-27" width="203.65625" height="54"></rect><g class="label" style="" transform="translate(-71.828125, -12)"><rect></rect><foreignObject width="143.65625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>更新measured_freq</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-N-27" transform="translate(387.89453125, 1405.140625)"><rect class="basic label-container" style="" x="-80" y="-27" width="160" height="54"></rect><g class="label" style="" transform="translate(-50, -12)"><rect></rect><foreignObject width="100" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>保存当前状态</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><h3 id='64-dds输出更新流程'><span>6.4 DDS输出更新流程</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart8" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 327.6796875px;" viewBox="0 0 327.6796875 1487.875" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart8{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart8 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart8 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart8 .error-icon{fill:#a44141;}#mermaidChart8 .error-text{fill:#ddd;stroke:#ddd;}#mermaidChart8 .edge-thickness-normal{stroke-width:1px;}#mermaidChart8 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart8 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart8 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart8 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart8 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart8 .marker{fill:lightgrey;stroke:lightgrey;}#mermaidChart8 .marker.cross{stroke:lightgrey;}#mermaidChart8 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaidChart8 p{margin:0;}#mermaidChart8 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaidChart8 .cluster-label text{fill:#F9FFFE;}#mermaidChart8 .cluster-label span{color:#F9FFFE;}#mermaidChart8 .cluster-label span p{background-color:transparent;}#mermaidChart8 .label text,#mermaidChart8 span{fill:#ccc;color:#ccc;}#mermaidChart8 .node rect,#mermaidChart8 .node circle,#mermaidChart8 .node ellipse,#mermaidChart8 .node polygon,#mermaidChart8 .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaidChart8 .rough-node .label text,#mermaidChart8 .node .label text,#mermaidChart8 .image-shape .label,#mermaidChart8 .icon-shape .label{text-anchor:middle;}#mermaidChart8 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart8 .rough-node .label,#mermaidChart8 .node .label,#mermaidChart8 .image-shape .label,#mermaidChart8 .icon-shape .label{text-align:center;}#mermaidChart8 .node.clickable{cursor:pointer;}#mermaidChart8 .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaidChart8 .arrowheadPath{fill:lightgrey;}#mermaidChart8 .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaidChart8 .flowchart-link{stroke:lightgrey;fill:none;}#mermaidChart8 .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart8 .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaidChart8 .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart8 .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaidChart8 .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaidChart8 .cluster text{fill:#F9FFFE;}#mermaidChart8 .cluster span{color:#F9FFFE;}#mermaidChart8 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart8 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaidChart8 rect.text{fill:none;stroke-width:0;}#mermaidChart8 .icon-shape,#mermaidChart8 .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaidChart8 .icon-shape p,#mermaidChart8 .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaidChart8 .icon-shape rect,#mermaidChart8 .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaidChart8 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart8 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart8 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart8_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart8_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart8_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart8_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart8_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart8_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M189.68,62L189.68,87L189.68,108" id="L_A_B_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M189.68,166L189.68,191L189.68,212" id="L_B_C_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M189.68,294L189.68,319L189.68,340" id="L_C_D_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M189.68,398L189.68,423L189.68,444" id="L_D_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M152.177,502L117.453,527L117.453,548" id="L_E_F_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M117.453,606L117.453,631L117.453,652" id="L_F_G_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M117.453,710L117.453,735L117.453,756" id="L_G_H_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M117.453,814L117.453,839L117.453,860" id="L_H_I_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M117.453,918L117.453,943L117.453,964" id="L_I_J_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M117.453,1022L117.453,1047L153.716,1103.436" id="L_J_K_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M224.481,1106.802L261.906,1047L261.906,995L261.906,943L261.906,891L261.906,839L261.906,787L261.906,735L261.906,683L261.906,631L261.906,579L261.906,527L230.428,504.337" id="L_K_E_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M190.18,1248.375L189.68,1284.875L189.68,1317.875" id="L_K_L_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path><path d="M189.68,1375.875L189.68,1400.875L189.68,1421.875" id="L_L_M_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart8_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(261.90625, 787)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>否</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(189.6796875, 1284.875)"><g class="label" transform="translate(-8, -12)"><foreignObject width="16" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "><p>是</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-A-0" transform="translate(189.6796875, 35)"><rect class="basic label-container" style="" x="-77.6640625" y="-27" width="155.328125" height="54"></rect><g class="label" style="" transform="translate(-47.6640625, -12)"><rect></rect><foreignObject width="95.328125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>需要更新DDS</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-B-1" transform="translate(189.6796875, 139)"><rect class="basic label-container" style="" x="-80" y="-27" width="160" height="54"></rect><g class="label" style="" transform="translate(-50, -12)"><rect></rect><foreignObject width="100" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>计算输出频率</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-C-3" transform="translate(189.6796875, 255)"><rect class="basic label-container" style="" x="-130" y="-39" width="260" height="78"></rect><g class="label" style="" transform="translate(-100, -24)"><rect></rect><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel "><p>output_freq = ref_freq × multiplier_n</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-D-5" transform="translate(189.6796875, 371)"><rect class="basic label-container" style="" x="-80" y="-27" width="160" height="54"></rect><g class="label" style="" transform="translate(-50, -12)"><rect></rect><foreignObject width="100" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>限制最大频率</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-E-7" transform="translate(189.6796875, 475)"><rect class="basic label-container" style="" x="-76.1953125" y="-27" width="152.390625" height="54"></rect><g class="label" style="" transform="translate(-46.1953125, -12)"><rect></rect><foreignObject width="92.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>循环4个通道</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-F-9" transform="translate(117.453125, 579)"><rect class="basic label-container" style="" x="-77.6640625" y="-27" width="155.328125" height="54"></rect><g class="label" style="" transform="translate(-47.6640625, -12)"><rect></rect><foreignObject width="95.328125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>选择DDS通道</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-G-11" transform="translate(117.453125, 683)"><rect class="basic label-container" style="" x="-70.1640625" y="-27" width="140.328125" height="54"></rect><g class="label" style="" transform="translate(-40.1640625, -12)"><rect></rect><foreignObject width="80.328125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>计算ACR值</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H-13" transform="translate(117.453125, 787)"><rect class="basic label-container" style="" x="-86.1640625" y="-27" width="172.328125" height="54"></rect><g class="label" style="" transform="translate(-56.1640625, -12)"><rect></rect><foreignObject width="112.328125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>设置ACR寄存器</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-I-15" transform="translate(117.453125, 891)"><rect class="basic label-container" style="" x="-109.453125" y="-27" width="218.90625" height="54"></rect><g class="label" style="" transform="translate(-79.453125, -12)"><rect></rect><foreignObject width="158.90625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>设置CPOW相位寄存器</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-J-17" transform="translate(117.453125, 995)"><rect class="basic label-container" style="" x="-103.6640625" y="-27" width="207.328125" height="54"></rect><g class="label" style="" transform="translate(-73.6640625, -12)"><rect></rect><foreignObject width="147.328125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>设置FTW频率寄存器</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-K-19" transform="translate(189.6796875, 1159.9375)"><polygon points="87.9375,0 175.875,-87.9375 87.9375,-175.875 0,-87.9375" class="label-container" transform="translate(-87.9375,87.9375)"></polygon><g class="label" style="" transform="translate(-60.9375, -12)"><rect></rect><foreignObject width="121.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>所有通道配置完?</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-L-23" transform="translate(189.6796875, 1348.875)"><rect class="basic label-container" style="" x="-87.2421875" y="-27" width="174.484375" height="54"></rect><g class="label" style="" transform="translate(-57.2421875, -12)"><rect></rect><foreignObject width="114.484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>发送IO_UPDATE</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-M-25" transform="translate(189.6796875, 1452.875)"><rect class="basic label-container" style="" x="-92.1953125" y="-27" width="184.390625" height="54"></rect><g class="label" style="" transform="translate(-62.1953125, -12)"><rect></rect><foreignObject width="124.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>4路同步更新完成</p></span></div></foreignObject></g></g></g></g></g></svg></div><p>&nbsp;</p><hr /><h2 id='7-关键代码模块说明'><span>7. 关键代码模块说明</span></h2><h3 id='71-频率测量模块'><span>7.1 频率测量模块</span></h3><p><strong><span>文件：</span></strong><span> </span><code>measure.pio.h</code></p><p><strong><span>功能：</span></strong></p><ul><li><p><span>PIO硬件实现边沿计数</span></p></li><li><p><span>无CPU开销，连续计数</span></p></li><li><p><span>支持32位计数，无溢出问题</span></p></li></ul><p><strong><span>关键函数：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cpp"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">frequency_counter_program_init</span>() &nbsp;<span class="cm-comment">// 初始化PIO状态机</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">frequency_counter_read_count</span>() &nbsp; &nbsp;<span class="cm-comment">// 读取边沿计数</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><h3 id='72-相位测量模块'><span>7.2 相位测量模块</span></h3><p><strong><span>文件：</span></strong><span> </span><code>phase_measure.pio.h</code></p><p><strong><span>功能：</span></strong></p><ul><li><p><span>PIO硬件测量两信号间的相位差</span></p></li><li><p><span>分辨率：5ns @ 200MHz</span></p></li><li><p><span>测量参考边沿到目标边沿的时间</span></p></li></ul><p><strong><span>关键函数：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cpp"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">phase_measure_program_init</span>() &nbsp;<span class="cm-comment">// 初始化相位测量</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">phase_measure_read</span>() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// 读取相位差</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><h3 id='73-幅度补偿模块'><span>7.3 幅度补偿模块</span></h3><p><strong><span>函数：</span></strong><span> </span><code>calculateSmartACR()</code></p><p><strong><span>算法：</span></strong></p><ol start='' ><li><p><span>判断频率范围</span></p></li><li><p><span>低频/高频使用固定ACR值</span></p></li><li><p><span>中间频率线性插值</span></p></li></ol><p><strong><span>优势：</span></strong></p><ul><li><p><span>补偿频率响应</span></p></li><li><p><span>保证输出幅度稳定</span></p></li><li><p><span>双点校准，精度高</span></p></li></ul><h3 id='74-dds控制模块'><span>7.4 DDS控制模块</span></h3><p><strong><span>函数：</span></strong><span> </span><code>setSmartFrequencyAndPhase()</code></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>计算并设置ACR（幅度）</span></p></li><li><p><span>计算并设置CPOW（相位）</span></p></li><li><p><span>计算并设置FTW（频率）</span></p></li><li><p><span>触发IO_UPDATE</span></p></li></ol><p><strong><span>特点：</span></strong></p><ul><li><p><span>支持延迟更新（defer_update）</span></p></li><li><p><span>4通道原子更新</span></p></li><li><p><span>精确相位控制</span></p></li></ul><hr /><h2 id='8-关键参数配置表'><span>8. 关键参数配置表</span></h2><h3 id='81-系统参数'><span>8.1 系统参数</span></h3><figure class='table-figure'><table><thead><tr><th><span>参数</span></th><th><span>值</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>更新间隔</span></td><td><span>100ms</span></td><td><span>频率/相位采样和DDS更新周期</span></td></tr><tr><td><span>EMA滤波系数</span></td><td><span>0.2</span></td><td><span>频率平滑系数</span></td></tr><tr><td><span>EMA重置阈值</span></td><td><span>1%</span></td><td><span>频率变化超过此值立即重置</span></td></tr><tr><td><span>双样本确认范围</span></td><td><span>±2%</span></td><td><span>频率测量确认范围</span></td></tr></tbody></table></figure><h3 id='82-校准参数'><span>8.2 校准参数</span></h3><figure class='table-figure'><table><thead><tr><th><span>参数</span></th><th><span>值</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>低频校准点</span></td><td><span>1kHz</span></td><td><span>低频校准频率</span></td></tr><tr><td><span>高频校准点</span></td><td><span>2MHz</span></td><td><span>高频校准频率</span></td></tr><tr><td><span>目标VPP</span></td><td><span>1000mV</span></td><td><span>输出目标峰峰值</span></td></tr><tr><td><span>低频校准VPP</span></td><td><span>1216mV</span></td><td><span>1kHz时ACR=1023的输出</span></td></tr><tr><td><span>高频校准VPP</span></td><td><span>1149mV</span></td><td><span>2MHz时ACR=1023的输出</span></td></tr></tbody></table></figure><h3 id='83-dds参数'><span>8.3 DDS参数</span></h3><figure class='table-figure'><table><thead><tr><th><span>参数</span></th><th><span>值</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>基准时钟</span></td><td><span>25MHz</span></td><td><span>AD9959外部时钟</span></td></tr><tr><td><span>PLL倍频</span></td><td><span>4倍</span></td><td><span>系统时钟倍频系数</span></td></tr><tr><td><span>系统时钟</span></td><td><span>100MHz</span></td><td><span>PLL输出时钟</span></td></tr><tr><td><span>SPI速率</span></td><td><span>2MHz</span></td><td><span>SPI通信速率</span></td></tr><tr><td><span>最大输出频率</span></td><td><span>50MHz</span></td><td><span>奈奎斯特频率</span></td></tr></tbody></table></figure><h3 id='84-放大器参数'><span>8.4 放大器参数</span></h3><figure class='table-figure'><table><thead><tr><th><span>参数</span></th><th><span>值</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>反馈电阻</span></td><td><span>2.4kΩ</span></td><td><span>Rf</span></td></tr><tr><td><span>输入电阻</span></td><td><span>1.0kΩ</span></td><td><span>Ri</span></td></tr><tr><td><span>放大器增益</span></td><td><span>2.4</span></td><td><span>Rf/Ri</span></td></tr></tbody></table></figure><hr /><h2 id='9-相位校准机制'><span>9. 相位校准机制</span></h2><h3 id='91-输入相位测量'><span>9.1 输入相位测量</span></h3><p><span>系统实时测量输入信号的相位关系：</span></p><ul><li><p><span>SIN+ (GPIO1) 作为参考（0°）</span></p></li><li><p><span>测量其他3路相对于SIN+的相位差</span></p></li></ul><h3 id='92-输出相位校准'><span>9.2 输出相位校准</span></h3><p><span>即使输入信号不完全正交，输出信号也能保证精确正交：</span></p><figure class='table-figure'><table><thead><tr><th><span>输出通道</span></th><th><span>理想相位</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>SIN+ (OUT0)</span></td><td><span>0°</span></td><td><span>参考相位</span></td></tr><tr><td><span>COS+ (OUT1)</span></td><td><span>90°</span></td><td><span>超前90°</span></td></tr><tr><td><span>SIN- (OUT2)</span></td><td><span>180°</span></td><td><span>超前180°</span></td></tr><tr><td><span>COS- (OUT3)</span></td><td><span>270°</span></td><td><span>超前270°</span></td></tr></tbody></table></figure><p><strong><span>校准原理：</span></strong></p><ul><li><p><span>DDS硬件保证相位精度</span></p></li><li><p><span>输出时强制设置为理想相位值</span></p></li><li><p><span>不依赖输入信号的相位精度</span></p></li></ul><hr /><h2 id='10-性能指标'><span>10. 性能指标</span></h2><h3 id='101-频率测量性能'><span>10.1 频率测量性能</span></h3><figure class='table-figure'><table><thead><tr><th><span>指标</span></th><th><span>数值</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>测量范围</span></td><td><span>10Hz ~ 100kHz</span></td><td><span>输入频率范围</span></td></tr><tr><td><span>测量精度</span></td><td><span>±0.1%</span></td><td><span>基于PIO硬件测量</span></td></tr><tr><td><span>响应时间</span></td><td><span>&lt;100ms</span></td><td><span>频率变化跟踪时间</span></td></tr><tr><td><span>分辨率</span></td><td><span>1Hz</span></td><td><span>整数Hz分辨率</span></td></tr></tbody></table></figure><h3 id='102-相位测量性能'><span>10.2 相位测量性能</span></h3><figure class='table-figure'><table><thead><tr><th><span>指标</span></th><th><span>数值</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>测量精度</span></td><td><span>±0.18° @ 100kHz</span></td><td><span>基于PIO硬件测量</span></td></tr><tr><td><span>分辨率</span></td><td><span>5ns</span></td><td><span>PIO时钟周期分辨率</span></td></tr><tr><td><span>测量范围</span></td><td><span>0° ~ 360°</span></td><td><span>全相位范围</span></td></tr></tbody></table></figure><h3 id='103-输出性能'><span>10.3 输出性能</span></h3><figure class='table-figure'><table><thead><tr><th><span>指标</span></th><th><span>数值</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>频率范围</span></td><td><span>20kHz ~ 2MHz</span></td><td><span>输入×倍频系数</span></td></tr><tr><td><span>倍频范围</span></td><td><span>2 ~ 20倍</span></td><td><span>可调倍频系数</span></td></tr><tr><td><span>相位精度</span></td><td><span>±0.01°</span></td><td><span>DDS硬件保证</span></td></tr><tr><td><span>幅度精度</span></td><td><span>±2%</span></td><td><span>经过ACR补偿后</span></td></tr><tr><td><span>幅度稳定性</span></td><td><span>±1%</span></td><td><span>频率响应补偿后</span></td></tr></tbody></table></figure><hr /><h2 id='11-使用说明'><span>11. 使用说明</span></h2><h3 id='111-系统启动'><span>11.1 系统启动</span></h3><ol start='' ><li><p><span>上电后系统自动初始化</span></p></li><li><p><span>串口输出系统信息（115200波特率）</span></p></li><li><p><span>等待输入信号</span></p></li></ol><h3 id='112-倍频系数设置'><span>11.2 倍频系数设置</span></h3><p><span>通过串口发送命令设置倍频系数：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">格式：n=&lt;2~20&gt;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">示例：n=5 &nbsp; &nbsp;  // 设置5倍频</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  10 &nbsp; &nbsp;  // 也可以直接输入数字</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><h3 id='113-状态监控'><span>11.3 状态监控</span></h3><p><span>系统每100ms输出一次状态信息：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[n=5 f=50000Hz] SIN+(G1-&gt;I0): m=0.0° o=0°  COS+(G2-&gt;I1): m=90.2° o=90°  SIN-(G3-&gt;I2): m=180.1° o=180°  COS-(G0-&gt;I3): m=270.3° o=270°</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><strong><span>说明：</span></strong></p><ul><li><p><code>n=5</code><span>: 当前倍频系数</span></p></li><li><p><code>f=50000Hz</code><span>: 输入参考频率</span></p></li><li><p><code>m=90.2°</code><span>: 测量相位</span></p></li><li><p><code>o=90°</code><span>: 输出设定相位</span></p></li></ul><hr /><h2 id='12-测试验证'><span>12. 测试验证</span></h2><h3 id='121-功能测试'><span>12.1 功能测试</span></h3><figure class='table-figure'><table><thead><tr><th><span>测试项</span></th><th><span>测试方法</span></th><th><span>预期结果</span></th></tr></thead><tbody><tr><td><span>频率测量</span></td><td><span>输入10Hz~100kHz信号</span></td><td><span>测量值与实际值误差&lt;0.1%</span></td></tr><tr><td><span>相位测量</span></td><td><span>输入正交信号</span></td><td><span>相位差90°±0.5°</span></td></tr><tr><td><span>倍频输出</span></td><td><span>设置不同倍频系数</span></td><td><span>输出频率=输入×倍频系数</span></td></tr><tr><td><span>幅度输出</span></td><td><span>测量输出VPP</span></td><td><span>1V±2%</span></td></tr><tr><td><span>相位输出</span></td><td><span>测量输出相位差</span></td><td><span>90°±0.1°</span></td></tr><tr><td><span>偏置电压</span></td><td><span>测量输出DC偏置</span></td><td><span>2.5V±0.05V</span></td></tr></tbody></table></figure><h3 id='122-性能测试'><span>12.2 性能测试</span></h3><figure class='table-figure'><table><thead><tr><th><span>测试项</span></th><th><span>测试条件</span></th><th><span>性能指标</span></th></tr></thead><tbody><tr><td><span>频率跟踪速度</span></td><td><span>1kHz步进变化</span></td><td><span>跟踪时间&lt;100ms</span></td></tr><tr><td><span>频率跟踪速度</span></td><td><span>10kHz步进变化</span></td><td><span>跟踪时间&lt;100ms</span></td></tr><tr><td><span>频率稳定性</span></td><td><span>固定输入频率</span></td><td><span>输出频率抖动&lt;0.01%</span></td></tr><tr><td><span>幅度稳定性</span></td><td><span>10Hz~100kHz扫频</span></td><td><span>输出VPP变化&lt;2%</span></td></tr></tbody></table></figure><hr /><h2 id='13-故障排查'><span>13. 故障排查</span></h2><h3 id='131-常见问题'><span>13.1 常见问题</span></h3><figure class='table-figure'><table><thead><tr><th><span>问题</span></th><th><span>可能原因</span></th><th><span>解决方法</span></th></tr></thead><tbody><tr><td><span>无输出信号</span></td><td><span>输入信号未连接</span></td><td><span>检查输入连接</span></td></tr><tr><td><span>输出频率错误</span></td><td><span>倍频系数设置错误</span></td><td><span>检查串口命令</span></td></tr><tr><td><span>输出幅度偏小</span></td><td><span>ACR校准参数需调整</span></td><td><span>重新校准ACR值</span></td></tr><tr><td><span>相位不准确</span></td><td><span>DDS配置错误</span></td><td><span>检查相位寄存器设置</span></td></tr><tr><td><span>系统无响应</span></td><td><span>程序死锁</span></td><td><span>重启系统</span></td></tr></tbody></table></figure><h3 id='132-调试方法'><span>13.2 调试方法</span></h3><ol start='' ><li><p><strong><span>串口监控：</span></strong><span> 查看系统状态输出</span></p></li><li><p><strong><span>示波器测量：</span></strong><span> 验证输出信号参数</span></p></li><li><p><strong><span>频率计测量：</span></strong><span> 验证输出频率精度</span></p></li><li><p><strong><span>相位计测量：</span></strong><span> 验证相位关系</span></p></li></ol><hr /><h2 id='14-维护说明'><span>14. 维护说明</span></h2><h3 id='141-校准维护'><span>14.1 校准维护</span></h3><p><strong><span>ACR校准：</span></strong></p><ol start='' ><li><p><span>在1kHz和2MHz两个频率点测量输出VPP</span></p></li><li><p><span>更新代码中的</span><code>CAL_VPP_LOW_MV</code><span>和</span><code>CAL_VPP_HIGH_MV</code></p></li><li><p><span>重新编译烧录</span></p></li></ol><p><strong><span>相位校准：</span></strong></p><ul><li><p><span>系统自动测量输入相位</span></p></li><li><p><span>输出相位由DDS硬件保证，无需校准</span></p></li></ul><h3 id='142-软件更新'><span>14.2 软件更新</span></h3><ol start='' ><li><p><span>使用Arduino IDE或PlatformIO编译</span></p></li><li><p><span>通过USB连接RP2040</span></p></li><li><p><span>上传新固件</span></p></li></ol><hr /><h2 id='15-技术优势'><span>15. 技术优势</span></h2><h3 id='151-硬件优势'><span>15.1 硬件优势</span></h3><ol start='' ><li><p><strong><span>PIO硬件测量：</span></strong><span> CPU零开销，实时测量</span></p></li><li><p><strong><span>AD9959 DDS：</span></strong><span> 高精度频率和相位控制</span></p></li><li><p><strong><span>高速比较器：</span></strong><span> 支持100kHz频率检测</span></p></li></ol><h3 id='152-软件优势'><span>15.2 软件优势</span></h3><ol start='' ><li><p><strong><span>智能滤波：</span></strong><span> EMA滤波 + 自适应重置</span></p></li><li><p><strong><span>幅度补偿：</span></strong><span> 双点校准，保证输出稳定</span></p></li><li><p><strong><span>相位校准：</span></strong><span> 输出精确正交，不依赖输入</span></p></li></ol><h3 id='153-系统优势'><span>15.3 系统优势</span></h3><ol start='' ><li><p><strong><span>实时响应：</span></strong><span> 100ms更新周期，快速跟踪</span></p></li><li><p><strong><span>高精度：</span></strong><span> 频率精度0.1%，相位精度0.1°</span></p></li><li><p><strong><span>稳定性好：</span></strong><span> 硬件测量，软件滤波，双重保障</span></p></li></ol><hr /><h2 id='16-交付清单'><span>16. 交付清单</span></h2><h3 id='161-硬件交付'><span>16.1 硬件交付</span></h3><ul><li><p><span>集成化 PCBA（已烧录固件），集成 RP2040、AD9959、OPA4354、MCP6564 过零检测、2.5V 偏置电压源及全部相关电路</span></p></li><li><p><span>连接线缆（如适用）</span></p></li></ul><p><span>以下为各核心模块原理图，供参考与维护。</span></p><p><strong><span>1. AD9959 DDS 模块原理图</span></strong></p><p><img src="./assets/AD9959-schematic.png" alt="AD9959 DDS 模块原理图"></p><p><strong><span>2. RP2040 主控原理图</span></strong></p><p><img src="./assets/RP2040-schematic.png" alt="RP2040 主控原理图"></p><p><strong><span>3. 过零检测电路原理图（MCP6564）</span></strong></p><p><img src="./assets/zerocross-schematic.png" alt="过零检测电路原理图"></p><p><strong><span>4. 放大器原理图（OPA4354）</span></strong></p><p><img src="./assets/amplifier-schematic.png" alt="放大器原理图"></p><h3 id='162-软件交付'><span>16.2 软件交付</span></h3><ul><li><p><span>源代码（main.ino）</span></p></li><li><p><span>PIO程序（measure.pio.h, phase_measure.pio.h）</span></p></li><li><p><span>编译好的固件（.uf2文件）</span></p></li><li><p><span>交付文档（本文档）</span></p></li></ul><hr /><h2 id='附录a代码关键函数索引'><span>附录A：代码关键函数索引</span></h2><figure class='table-figure'><table><thead><tr><th><span>函数名</span></th><th><span>功能</span></th><th><span>位置</span></th></tr></thead><tbody><tr><td><code>sampleFrequency()</code></td><td><span>频率采样和计算</span></td><td><span>main.ino:237</span></td></tr><tr><td><code>samplePhase()</code></td><td><span>相位采样和计算</span></td><td><span>main.ino:289</span></td></tr><tr><td><code>calculateSmartACR()</code></td><td><span>ACR幅度补偿计算</span></td><td><span>main.ino:167</span></td></tr><tr><td><code>setSmartFrequencyAndPhase()</code></td><td><span>DDS频率相位设置</span></td><td><span>main.ino:189</span></td></tr><tr><td><code>frequency_counter_read_count()</code></td><td><span>PIO频率计数读取</span></td><td><span>measure.pio.h:86</span></td></tr><tr><td><code>phase_measure_read()</code></td><td><span>PIO相位测量读取</span></td><td><span>phase_measure.pio.h:123</span></td></tr></tbody></table></figure><h2 id='附录b寄存器映射'><span>附录B：寄存器映射</span></h2><h3 id='ad9959关键寄存器'><span>AD9959关键寄存器</span></h3><figure class='table-figure'><table><thead><tr><th><span>寄存器</span></th><th><span>地址</span></th><th><span>功能</span></th></tr></thead><tbody><tr><td><span>CSR</span></td><td><span>0x00</span></td><td><span>通道选择寄存器</span></td></tr><tr><td><span>FR1</span></td><td><span>0x01</span></td><td><span>功能寄存器1（PLL配置）</span></td></tr><tr><td><span>CFTW0</span></td><td><span>0x04</span></td><td><span>通道0频率调谐字</span></td></tr><tr><td><span>CPOW0</span></td><td><span>0x05</span></td><td><span>通道0相位偏移字</span></td></tr><tr><td><span>ACR</span></td><td><span>0x06</span></td><td><span>幅度控制寄存器</span></td></tr><tr><td><span>CW1</span></td><td><span>0x0A</span></td><td><span>通道1频率调谐字</span></td></tr></tbody></table></figure><hr /><p><strong><span>文档结束</span></strong></p></div></div>
</body>
</html>